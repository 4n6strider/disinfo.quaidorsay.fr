{"version":3,"sources":["node_modules/regenerator-runtime/runtime.js","node_modules/diff-match-patch/index.js","node_modules/@solid-js/nanostache/dist/_index.mjs","node_modules/better-dom/dist/better-dom.js","node_modules/better-dateinput-polyfill/dist/better-dateinput-polyfill.js","scripta-manent.js","C:/Users/super/AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["delimitersRegex","RegExp","processValue","valueName","values","value","call","matcher","match","trimmed","trim","ternaryDelimiter0","indexOf","ternaryDelimiter1","ternaryValueName","substring","ternaryCondition","length","Nanostache","template","replace","i","m","WINDOW","window","DOCUMENT","document","HTML","documentElement","UNKNOWN_NODE","ELEMENT_NODE","DOCUMENT_NODE","VENDOR_PREFIXES","FAKE_ANIMATION_NAME","SHEET_PROP_NAME","WEBKIT_PREFIX","WebKitAnimationEvent","util$index$$arrayProto","Array","prototype","util$index$$every","every","util$index$$each","forEach","util$index$$filter","filter","util$index$$map","map","util$index$$slice","slice","util$index$$isArray","isArray","util$index$$keys","Object","keys","util$index$$raf","requestAnimationFrame","util$index$$computeStyle","node","ownerDocument","defaultView","getComputedStyle","util$index$$injectElement","nodeType","getElementsByTagName","appendChild","MethodError","methodName","args","type","url","line","String","join","message","TypeError","StaticMethodError","DocumentTypeError","$Node","toString","valueOf","STYLE_NODE_HTML","$Document","styleNode","createElement","innerHTML","sheet","styleSheet","DocumentProto","$Element","ElementProto","tagName","toLowerCase","index$$DOM","index$$_DOM","DOM","constructor","noConflict","document$create$$reQuick","document$create$$sandbox","document$create$$makeMethod","all","arguments","result","quickMatch","exec","it","firstElementChild","removeChild","adoptNode","push","create","createAll","util$selectormatcher$$rquickIs","util$selectormatcher$$propName","concat","p","reduceRight","propName","util$selectormatcher$$default","selector","context","quick","split","found","querySelectorAll","parentNode","nodeName","id","getAttribute","hasAttribute","className","n","document$extend$$extensions","document$extend$$EVENT_TYPE","document$extend$$CSS_IMPORT_TEXT","document$extend$$applyLiveExtension","definition","el","ctr","mixinName","mixinProperty","extend","key","addEventListener","e","target","animationName","stopPropagation","style","setProperty","setTimeout","importStyles","mock","content","applyExtensions","children","importScripts","_this","_arguments","_len","urls","_key","callback","arg","shift","argType","script","src","onload","async","cssText","lastIndex","cssRules","insertRule","err","element$children$$makeMethod","validSelectorType","child","element$classes$$REGEXP_SPACE","element$classes$$normalizedClass","hasClass","classList","contains","addClass","_this2","_arguments2","_len2","classNames","_key2","add","removeClass","_arguments3","_len3","_key3","remove","toggleClass","force","util$stylehooks$$reDash","util$stylehooks$$hooks","get","set","find","name","str","toUpperCase","prefix","prop","util$stylehooks$$directions","util$stylehooks$$shortCuts","font","padding","dir","margin","float","stylePropName","props","hasEmptyStyleValue","index","some","util$stylehooks$$default","css","_this3","len","computed","strategy","getter","reduce","memo","setter","element$manipulation$$makeMethod","fastStrategy","requiresParent","_this4","fragment","createDocumentFragment","_len4","contents","_key4","insertAdjacentHTML","after","relatedNode","insertBefore","nextSibling","before","prepend","firstChild","append","replaceChild","util$selectorhooks$$default","focus","activeElement","matches","checker","offset","top","left","right","bottom","width","height","docEl","clientTop","clientLeft","scrollTop","pageYOffset","scrollLeft","pageXOffset","boundingRect","getBoundingClientRect","element$traversing$$makeMethod","propertyName","next","prev","nextAll","prevAll","closest","selectedIndex","options","text","textContent","o","selected","empty","util$animationhandler$$TRANSITION_EVENT_TYPE","util$animationhandler$$ANIMATION_EVENT_TYPE","util$animationhandler$$AnimationHandler","eventType","handleEvent","animationDirection","removeEventListener","start","util$animationhandler$$default","element$visibility$$makeMethod","condition","_this5","complete","visibility","parseFloat","show","hide","clone","deepCopy","clonedNode","cloneNode","element","otherNode","compareDocumentPosition","node$find$$REGEXP_QUICK","node$find$$REGEXP_ESCAPE","node$find$$makeMethod","getElementsByClassName","setAttribute","removeAttribute","findAll","util$eventhooks$$hooks","handler","_type","blur","capture","validity","invalid","util$eventhooks$$default","util$eventhandler$$supportsPassive","util$eventhandler$$opts","defineProperty","util$eventhandler$$EventHandler","event","currentTarget","once","unsubscribe","getEventProperty","apply","preventDefault","_arguments4","subscribe","hook","getLastArgument","lastArg","passive","util$eventhandler$$default","fire","detail","canContinue","createEvent","initCustomEvent","dispatchEvent","_handleEvent","util$accessorhooks$$hooks","util$accessorhooks$$default","defaultValue","_this6","on","_this7","requestHeaders","method","headers","APIBaseURL","$form_explorer","getElementById","$form_services","$form_typeofdocuments","$form_firstdocumentdate","$form_seconddocumentdate","$inputDates","fetch","init","showNotification","notificationsMsgs","browserSupport","getServices","then","data","setMaxInputDateToNow","initFormEventListener","populateServices","populateTypeOfDocuments","queryStringData","getQueryStringData","addInURL","selectedOptions","item","popStateHandler","async_fetch","response","ok","json","Error","status","request","Request","loadDocs","formData","getFormData","getDoc","service","firstDocumentDate","doc1","secondDocumentDate","doc2","date","route","encodeURI","error","next_version","substr","submitHandler","onServiceChangeHandler","onTypeOfDocumentChangeHandler","onDateChange","services","servicesArray","entries","sortedServices","sortAlphabeticallyServices","option","Option","dataset","typeofdocuments","sortAlphabeticallyTypeOfDocuments","typesofdocuments","sortedTypeOfDocuments","removeDiff","removeLegend","removeNotification","updateFormValues","action","Event","cancelable","urlParams","URLSearchParams","location","search","fromEntries","errogMsg","isSelectOptionExist","typeofdocument","console","log","date1","date2","$target","querySelector","URL","searchParams","history","pushState","removeInURL","delete","types","sort","a","b","currentDateKey","isValidForm","docs","showDiff","showLegend","showDatesInfos","FormData","dateToDMY","firstDocumentVersionAtDate","version_at_date","secondDocumentVersionAtDate","msg","dateClosest","Date","nothingToCompare","onlyDocumentDate","dmp","DiffMatchPatch","diff","diff_main","diffPrettyHtml","prettyHTMLDiff","$diffContent","$diffviewer","insertAfter","$legend","$legend_item1","$legend_item2","legendMsg","$notification","$notification_content","referenceNode","DIFF_DEconstE","DIFF_INSERT","DIFF_EQUAL","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","x","op","$inputDate","toISOString","dateToFormat","toLocaleString","day","month","year","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","body","stackTrace","innerText","getParents","modules","parents","k","d","dep","Function","deps","cached","cache","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5uBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACzqEA;AACA;AACA;AACA;AACO,IAAIA,eAAe,GAAG,IAAIC,MAAJ,CAAW,WAAX,EAAwB,IAAxB,CAAtB;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;;AACA,SAASC,YAAT,CAAsBC,SAAtB,EAAiCC,MAAjC,EAAyC;AACrC;AACA,MAAI,EAAED,SAAS,IAAIC,MAAf,CAAJ,EACI,OAAO,EAAP,CAHiC,CAIrC;;AACA,QAAMC,KAAK,GAAGD,MAAM,CAACD,SAAD,CAApB,CALqC,CAMrC;;AACA,SAAQ,OAAOE,KAAP,KAAiB,UAAjB,GAA8BA,KAAK,CAACC,IAAN,CAAWF,MAAX,EAAmBA,MAAnB,CAA9B,GAA2DC,KAAnE;AACH;AACD;AACA;AACA;AACA;AACA;;;AACA,SAASE,OAAT,CAAiBC,KAAjB,EAAwBJ,MAAxB,EAAgC;AAC5B;AACA,QAAMK,OAAO,GAAGD,KAAK,CAACE,IAAN,EAAhB,CAF4B,CAG5B;;AACA,QAAMC,iBAAiB,GAAGF,OAAO,CAACG,OAAR,CAAgB,GAAhB,CAA1B;AACA,QAAMC,iBAAiB,GAAGJ,OAAO,CAACG,O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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3gBA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;AAEA,IAAM4P,cAAc,GAAG;AACtBC,EAAAA,MAAM,EAAE,KADc;AAEtBC,EAAAA,OAAO,EAAE;AACR,cAAU,kBADF;AAER,oBAAgB;AAFR;AAFa,CAAvB;AAQA,IAAMC,UAAU,GAAG,sDAAn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","file":"scripta-manent.js","sourceRoot":"..\\js\\open-terms-archive","sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/**\n * Diff Match and Patch\n * Copyright 2018 The diff-match-patch Authors.\n * https://github.com/google/diff-match-patch\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n */\n\n/**\n * Class containing the diff, match and patch methods.\n * @constructor\n */\nvar diff_match_patch = function() {\n\n  // Defaults.\n  // Redefine these in your program to override the defaults.\n\n  // Number of seconds to map a diff before giving up (0 for infinity).\n  this.Diff_Timeout = 1.0;\n  // Cost of an empty edit operation in terms of edit characters.\n  this.Diff_EditCost = 4;\n  // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n  this.Match_Threshold = 0.5;\n  // How far to search for a match (0 = exact location, 1000+ = broad match).\n  // A match this many characters away from the expected location will add\n  // 1.0 to the score (0.0 is a perfect match).\n  this.Match_Distance = 1000;\n  // When deleting a large block of text (over ~64 characters), how close do\n  // the contents have to be to match the expected contents. (0.0 = perfection,\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\n  // end points of a delete need to match.\n  this.Patch_DeleteThreshold = 0.5;\n  // Chunk size for context length.\n  this.Patch_Margin = 4;\n\n  // The number of bits in an int.\n  this.Match_MaxBits = 32;\n};\n\n\n//  DIFF FUNCTIONS\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Class representing one diff tuple.\n * ~Attempts to look like a two-element array (which is what this used to be).~\n * Constructor returns an actual two-element array, to allow destructing @JackuB\n * See https://github.com/JackuB/diff-match-patch/issues/14 for details\n * @param {number} op Operation, one of: DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL.\n * @param {string} text Text to be deleted, inserted, or retained.\n * @constructor\n */\ndiff_match_patch.Diff = function(op, text) {\n  return [op, text];\n};\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean=} opt_checklines Optional speedup flag. If present and false,\n *     then don't run a line-level diff first to identify the changed areas.\n *     Defaults to true, which does a faster, slightly less optimal diff.\n * @param {number=} opt_deadline Optional time when the diff should be complete\n *     by.  Used internally for recursive calls.  Users should set DiffTimeout\n *     instead.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_main = function(text1, text2, opt_checklines,\n    opt_deadline) {\n  // Set a deadline by which time the diff must be complete.\n  if (typeof opt_deadline == 'undefined') {\n    if (this.Diff_Timeout <= 0) {\n      opt_deadline = Number.MAX_VALUE;\n    } else {\n      opt_deadline = (new Date).getTime() + this.Diff_Timeout * 1000;\n    }\n  }\n  var deadline = opt_deadline;\n\n  // Check for null inputs.\n  if (text1 == null || text2 == null) {\n    throw new Error('Null input. (diff_main)');\n  }\n\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [new diff_match_patch.Diff(DIFF_EQUAL, text1)];\n    }\n    return [];\n  }\n\n  if (typeof opt_checklines == 'undefined') {\n    opt_checklines = true;\n  }\n  var checklines = opt_checklines;\n\n  // Trim off common prefix (speedup).\n  var commonlength = this.diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = this.diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, commonprefix));\n  }\n  if (commonsuffix) {\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, commonsuffix));\n  }\n  this.diff_cleanupMerge(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_compute_ = function(text1, text2, checklines,\n    deadline) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1)];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(0, i)),\n             new diff_match_patch.Diff(DIFF_EQUAL, shorttext),\n             new diff_match_patch.Diff(DIFF_INSERT,\n                 longtext.substring(i + shorttext.length))];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1),\n            new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = this.diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline);\n    // Merge the results.\n    return diffs_a.concat([new diff_match_patch.Diff(DIFF_EQUAL, mid_common)],\n                          diffs_b);\n  }\n\n  if (checklines && text1.length > 100 && text2.length > 100) {\n    return this.diff_lineMode_(text1, text2, deadline);\n  }\n\n  return this.diff_bisect_(text1, text2, deadline);\n};\n\n\n/**\n * Do a quick line-level diff on both strings, then rediff the parts for\n * greater accuracy.\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_lineMode_ = function(text1, text2, deadline) {\n  // Scan the text on a line-by-line basis first.\n  var a = this.diff_linesToChars_(text1, text2);\n  text1 = a.chars1;\n  text2 = a.chars2;\n  var linearray = a.lineArray;\n\n  var diffs = this.diff_main(text1, text2, false, deadline);\n\n  // Convert the diff back to original text.\n  this.diff_charsToLines_(diffs, linearray);\n  // Eliminate freak matches (e.g. blank lines)\n  this.diff_cleanupSemantic(diffs);\n\n  // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete >= 1 && count_insert >= 1) {\n          // Delete the offending records and add the merged ones.\n          diffs.splice(pointer - count_delete - count_insert,\n                       count_delete + count_insert);\n          pointer = pointer - count_delete - count_insert;\n          var subDiff =\n              this.diff_main(text_delete, text_insert, false, deadline);\n          for (var j = subDiff.length - 1; j >= 0; j--) {\n            diffs.splice(pointer, 0, subDiff[j]);\n          }\n          pointer = pointer + subDiff.length;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n    pointer++;\n  }\n  diffs.pop();  // Remove the dummy entry at the end.\n\n  return diffs;\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_bisect_ = function(text1, text2, deadline) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 != 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Bail out if deadline is reached.\n    if ((new Date()).getTime() > deadline) {\n      break;\n    }\n\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length &&\n             text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length &&\n             text1.charAt(text1_length - x2 - 1) ==\n             text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [new diff_match_patch.Diff(DIFF_DELETE, text1),\n          new diff_match_patch.Diff(DIFF_INSERT, text2)];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_bisectSplit_ = function(text1, text2, x, y,\n    deadline) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\n *     An object containing the encoded text1, the encoded text2 and\n *     the array of unique strings.\n *     The zeroth element of the array of unique strings is intentionally blank.\n * @private\n */\ndiff_match_patch.prototype.diff_linesToChars_ = function(text1, text2) {\n  var lineArray = [];  // e.g. lineArray[4] == 'Hello\\n'\n  var lineHash = {};   // e.g. lineHash['Hello\\n'] == 4\n\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n  lineArray[0] = '';\n\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n  function diff_linesToCharsMunge_(text) {\n    var chars = '';\n    // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n    var lineStart = 0;\n    var lineEnd = -1;\n    // Keeping our own length variable is faster than looking it up.\n    var lineArrayLength = lineArray.length;\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart);\n      if (lineEnd == -1) {\n        lineEnd = text.length - 1;\n      }\n      var line = text.substring(lineStart, lineEnd + 1);\n\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) :\n          (lineHash[line] !== undefined)) {\n        chars += String.fromCharCode(lineHash[line]);\n      } else {\n        if (lineArrayLength == maxLines) {\n          // Bail out at 65535 because\n          // String.fromCharCode(65536) == String.fromCharCode(0)\n          line = text.substring(lineStart);\n          lineEnd = text.length;\n        }\n        chars += String.fromCharCode(lineArrayLength);\n        lineHash[line] = lineArrayLength;\n        lineArray[lineArrayLength++] = line;\n      }\n      lineStart = lineEnd + 1;\n    }\n    return chars;\n  }\n  // Allocate 2/3rds of the space for text1, the rest for text2.\n  var maxLines = 40000;\n  var chars1 = diff_linesToCharsMunge_(text1);\n  maxLines = 65535;\n  var chars2 = diff_linesToCharsMunge_(text2);\n  return {chars1: chars1, chars2: chars2, lineArray: lineArray};\n};\n\n\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of\n * text.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {!Array.<string>} lineArray Array of unique strings.\n * @private\n */\ndiff_match_patch.prototype.diff_charsToLines_ = function(diffs, lineArray) {\n  for (var i = 0; i < diffs.length; i++) {\n    var chars = diffs[i][1];\n    var text = [];\n    for (var j = 0; j < chars.length; j++) {\n      text[j] = lineArray[chars.charCodeAt(j)];\n    }\n    diffs[i][1] = text.join('');\n  }\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\ndiff_match_patch.prototype.diff_commonPrefix = function(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\ndiff_match_patch.prototype.diff_commonSuffix = function(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\ndiff_match_patch.prototype.diff_commonOverlap_ = function(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: https://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (found == 0 || text1.substring(text_length - length) ==\n        text2.substring(0, length)) {\n      best = length;\n      length++;\n    }\n  }\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n * @private\n */\ndiff_match_patch.prototype.diff_halfMatch_ = function(text1, text2) {\n  if (this.Diff_Timeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null;\n  }\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n  var dmp = this;  // 'this' becomes 'window' in a closure.\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i),\n                                               shorttext.substring(j));\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i),\n                                               shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemantic = function(diffs) {\n  var changes = false;\n  var equalities = [];  // Stack of indices where equalities are found.\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastEquality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0;  // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastEquality = diffs[pointer][1];\n    } else {  // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (lastEquality && (lastEquality.length <=\n          Math.max(length_insertions1, length_deletions1)) &&\n          (lastEquality.length <= Math.max(length_insertions2,\n                                           length_deletions2))) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0,\n                     new diff_match_patch.Diff(DIFF_DELETE, lastEquality));\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0;  // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastEquality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n  this.diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] == DIFF_DELETE &&\n        diffs[pointer][0] == DIFF_INSERT) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (overlap_length1 >= deletion.length / 2 ||\n            overlap_length1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL,\n              insertion.substring(0, overlap_length1)));\n          diffs[pointer - 1][1] =\n              deletion.substring(0, deletion.length - overlap_length1);\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (overlap_length2 >= deletion.length / 2 ||\n            overlap_length2 >= insertion.length / 2) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL,\n              deletion.substring(0, overlap_length2)));\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] =\n              insertion.substring(0, insertion.length - overlap_length2);\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] =\n              deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n};\n\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function(diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 &&\n        char1.match(diff_match_patch.whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 &&\n        char2.match(diff_match_patch.whitespaceRegex_);\n    var lineBreak1 = whitespace1 &&\n        char1.match(diff_match_patch.linebreakRegex_);\n    var lineBreak2 = whitespace2 &&\n        char2.match(diff_match_patch.linebreakRegex_);\n    var blankLine1 = lineBreak1 &&\n        one.match(diff_match_patch.blanklineEndRegex_);\n    var blankLine2 = lineBreak2 &&\n        two.match(diff_match_patch.blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) +\n          diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score = diff_cleanupSemanticScore_(equality1, edit) +\n            diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n};\n\n// Define some regex patterns for matching boundaries.\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\ndiff_match_patch.whitespaceRegex_ = /\\s/;\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupEfficiency = function(diffs) {\n  var changes = false;\n  var equalities = [];  // Stack of indices where equalities are found.\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastEquality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0;  // Index of current position.\n  // Is there an insertion operation before the last equality.\n  var pre_ins = false;\n  // Is there a deletion operation before the last equality.\n  var pre_del = false;\n  // Is there an insertion operation after the last equality.\n  var post_ins = false;\n  // Is there a deletion operation after the last equality.\n  var post_del = false;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\n      if (diffs[pointer][1].length < this.Diff_EditCost &&\n          (post_ins || post_del)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer;\n        pre_ins = post_ins;\n        pre_del = post_del;\n        lastEquality = diffs[pointer][1];\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0;\n        lastEquality = null;\n      }\n      post_ins = post_del = false;\n    } else {  // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_DELETE) {\n        post_del = true;\n      } else {\n        post_ins = true;\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n      if (lastEquality && ((pre_ins && pre_del && post_ins && post_del) ||\n                           ((lastEquality.length < this.Diff_EditCost / 2) &&\n                            (pre_ins + pre_del + post_ins + post_del) == 3))) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0,\n                     new diff_match_patch.Diff(DIFF_DELETE, lastEquality));\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        equalitiesLength--;  // Throw away the equality we just deleted;\n        lastEquality = null;\n        if (pre_ins && pre_del) {\n          // No changes made which could affect previous entry, keep going.\n          post_ins = post_del = true;\n          equalitiesLength = 0;\n        } else {\n          equalitiesLength--;  // Throw away the previous equality.\n          pointer = equalitiesLength > 0 ?\n              equalities[equalitiesLength - 1] : -1;\n          post_ins = post_del = false;\n        }\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupMerge = function(diffs) {\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, new diff_match_patch.Diff(DIFF_EQUAL,\n                    text_insert.substring(0, commonlength)));\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          pointer -= count_delete + count_insert;\n          diffs.splice(pointer, count_delete + count_insert);\n          if (text_delete.length) {\n            diffs.splice(pointer, 0,\n                new diff_match_patch.Diff(DIFF_DELETE, text_delete));\n            pointer++;\n          }\n          if (text_insert.length) {\n            diffs.splice(pointer, 0,\n                new diff_match_patch.Diff(DIFF_INSERT, text_insert));\n            pointer++;\n          }\n          pointer++;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n\n/**\n * loc is a location in text1, compute and return the equivalent location in\n * text2.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {number} loc Location within text1.\n * @return {number} Location within text2.\n */\ndiff_match_patch.prototype.diff_xIndex = function(diffs, loc) {\n  var chars1 = 0;\n  var chars2 = 0;\n  var last_chars1 = 0;\n  var last_chars2 = 0;\n  var x;\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {  // Equality or deletion.\n      chars1 += diffs[x][1].length;\n    }\n    if (diffs[x][0] !== DIFF_DELETE) {  // Equality or insertion.\n      chars2 += diffs[x][1].length;\n    }\n    if (chars1 > loc) {  // Overshot the location.\n      break;\n    }\n    last_chars1 = chars1;\n    last_chars2 = chars2;\n  }\n  // Was the location was deleted?\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\n    return last_chars2;\n  }\n  // Add the remaining character length.\n  return last_chars2 + (loc - last_chars1);\n};\n\n\n/**\n * Convert a diff array into a pretty HTML report.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} HTML representation.\n */\ndiff_match_patch.prototype.diff_prettyHtml = function(diffs) {\n  var html = [];\n  var pattern_amp = /&/g;\n  var pattern_lt = /</g;\n  var pattern_gt = />/g;\n  var pattern_para = /\\n/g;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];    // Operation (insert, delete, equal)\n    var data = diffs[x][1];  // Text of change.\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;')\n        .replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\n    switch (op) {\n      case DIFF_INSERT:\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\n        break;\n      case DIFF_DELETE:\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\n        break;\n      case DIFF_EQUAL:\n        html[x] = '<span>' + text + '</span>';\n        break;\n    }\n  }\n  return html.join('');\n};\n\n\n/**\n * Compute and return the source text (all equalities and deletions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Source text.\n */\ndiff_match_patch.prototype.diff_text1 = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n\n/**\n * Compute and return the destination text (all equalities and insertions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Destination text.\n */\ndiff_match_patch.prototype.diff_text2 = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {number} Number of changes.\n */\ndiff_match_patch.prototype.diff_levenshtein = function(diffs) {\n  var levenshtein = 0;\n  var insertions = 0;\n  var deletions = 0;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];\n    var data = diffs[x][1];\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length;\n        break;\n      case DIFF_DELETE:\n        deletions += data.length;\n        break;\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        levenshtein += Math.max(insertions, deletions);\n        insertions = 0;\n        deletions = 0;\n        break;\n    }\n  }\n  levenshtein += Math.max(insertions, deletions);\n  return levenshtein;\n};\n\n\n/**\n * Crush the diff into an encoded string which describes the operations\n * required to transform text1 into text2.\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Delta text.\n */\ndiff_match_patch.prototype.diff_toDelta = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        text[x] = '+' + encodeURI(diffs[x][1]);\n        break;\n      case DIFF_DELETE:\n        text[x] = '-' + diffs[x][1].length;\n        break;\n      case DIFF_EQUAL:\n        text[x] = '=' + diffs[x][1].length;\n        break;\n    }\n  }\n  return text.join('\\t').replace(/%20/g, ' ');\n};\n\n\n/**\n * Given the original text1, and an encoded string which describes the\n * operations required to transform text1 into text2, compute the full diff.\n * @param {string} text1 Source string for the diff.\n * @param {string} delta Delta text.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @throws {!Error} If invalid input.\n */\ndiff_match_patch.prototype.diff_fromDelta = function(text1, delta) {\n  var diffs = [];\n  var diffsLength = 0;  // Keeping our own length var is faster in JS.\n  var pointer = 0;  // Cursor in text1\n  var tokens = delta.split(/\\t/g);\n  for (var x = 0; x < tokens.length; x++) {\n    // Each token begins with a one character parameter which specifies the\n    // operation of this token (delete, insert, equality).\n    var param = tokens[x].substring(1);\n    switch (tokens[x].charAt(0)) {\n      case '+':\n        try {\n          diffs[diffsLength++] =\n              new diff_match_patch.Diff(DIFF_INSERT, decodeURI(param));\n        } catch (ex) {\n          // Malformed URI sequence.\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\n        }\n        break;\n      case '-':\n        // Fall through.\n      case '=':\n        var n = parseInt(param, 10);\n        if (isNaN(n) || n < 0) {\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\n        }\n        var text = text1.substring(pointer, pointer += n);\n        if (tokens[x].charAt(0) == '=') {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_EQUAL, text);\n        } else {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_DELETE, text);\n        }\n        break;\n      default:\n        // Blank tokens are ok (from a trailing \\t).\n        // Anything else is an error.\n        if (tokens[x]) {\n          throw new Error('Invalid diff operation in diff_fromDelta: ' +\n                          tokens[x]);\n        }\n    }\n  }\n  if (pointer != text1.length) {\n    throw new Error('Delta length (' + pointer +\n        ') does not equal source text length (' + text1.length + ').');\n  }\n  return diffs;\n};\n\n\n//  MATCH FUNCTIONS\n\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n */\ndiff_match_patch.prototype.match_main = function(text, pattern, loc) {\n  // Check for null inputs.\n  if (text == null || pattern == null || loc == null) {\n    throw new Error('Null input. (match_main)');\n  }\n\n  loc = Math.max(0, Math.min(loc, text.length));\n  if (text == pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0;\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1;\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc;\n  } else {\n    // Do a fuzzy compare.\n    return this.match_bitap_(text, pattern, loc);\n  }\n};\n\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n * @private\n */\ndiff_match_patch.prototype.match_bitap_ = function(text, pattern, loc) {\n  if (pattern.length > this.Match_MaxBits) {\n    throw new Error('Pattern too long for this browser.');\n  }\n\n  // Initialise the alphabet.\n  var s = this.match_alphabet_(pattern);\n\n  var dmp = this;  // 'this' becomes 'window' in a closure.\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n  function match_bitapScore_(e, x) {\n    var accuracy = e / pattern.length;\n    var proximity = Math.abs(loc - x);\n    if (!dmp.Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy;\n    }\n    return accuracy + (proximity / dmp.Match_Distance);\n  }\n\n  // Highest score beyond which we give up.\n  var score_threshold = this.Match_Threshold;\n  // Is there a nearby exact match? (speedup)\n  var best_loc = text.indexOf(pattern, loc);\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    // What about in the other direction? (speedup)\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n    if (best_loc != -1) {\n      score_threshold =\n          Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    }\n  }\n\n  // Initialise the bit arrays.\n  var matchmask = 1 << (pattern.length - 1);\n  best_loc = -1;\n\n  var bin_min, bin_mid;\n  var bin_max = pattern.length + text.length;\n  var last_rd;\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0;\n    bin_mid = bin_max;\n    while (bin_min < bin_mid) {\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid;\n      } else {\n        bin_max = bin_mid;\n      }\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n    }\n    // Use the result from this iteration as the maximum for the next.\n    bin_max = bin_mid;\n    var start = Math.max(1, loc - bin_mid + 1);\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n\n    var rd = Array(finish + 2);\n    rd[finish + 1] = (1 << d) - 1;\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)];\n      if (d === 0) {  // First pass: exact match.\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch;\n      } else {  // Subsequent passes: fuzzy match.\n        rd[j] = (((rd[j + 1] << 1) | 1) & charMatch) |\n                (((last_rd[j + 1] | last_rd[j]) << 1) | 1) |\n                last_rd[j + 1];\n      }\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore_(d, j - 1);\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score;\n          best_loc = j - 1;\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc);\n          } else {\n            // Already passed loc, downhill from here on in.\n            break;\n          }\n        }\n      }\n    }\n    // No hope for a (better) match at greater error levels.\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\n      break;\n    }\n    last_rd = rd;\n  }\n  return best_loc;\n};\n\n\n/**\n * Initialise the alphabet for the Bitap algorithm.\n * @param {string} pattern The text to encode.\n * @return {!Object} Hash of character locations.\n * @private\n */\ndiff_match_patch.prototype.match_alphabet_ = function(pattern) {\n  var s = {};\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0;\n  }\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << (pattern.length - i - 1);\n  }\n  return s;\n};\n\n\n//  PATCH FUNCTIONS\n\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond Match_MaxBits.\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\n * @param {string} text Source text.\n * @private\n */\ndiff_match_patch.prototype.patch_addContext_ = function(patch, text) {\n  if (text.length == 0) {\n    return;\n  }\n  if (patch.start2 === null) {\n    throw Error('patch not initialized');\n  }\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n  var padding = 0;\n\n  // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) &&\n         pattern.length < this.Match_MaxBits - this.Patch_Margin -\n         this.Patch_Margin) {\n    padding += this.Patch_Margin;\n    pattern = text.substring(patch.start2 - padding,\n                             patch.start2 + patch.length1 + padding);\n  }\n  // Add one chunk for good luck.\n  padding += this.Patch_Margin;\n\n  // Add the prefix.\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\n  if (prefix) {\n    patch.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, prefix));\n  }\n  // Add the suffix.\n  var suffix = text.substring(patch.start2 + patch.length1,\n                              patch.start2 + patch.length1 + padding);\n  if (suffix) {\n    patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, suffix));\n  }\n\n  // Roll back the start points.\n  patch.start1 -= prefix.length;\n  patch.start2 -= prefix.length;\n  // Extend the lengths.\n  patch.length1 += prefix.length + suffix.length;\n  patch.length2 += prefix.length + suffix.length;\n};\n\n\n/**\n * Compute a list of patches to turn text1 into text2.\n * Use diffs if provided, otherwise compute it ourselves.\n * There are four ways to call this function, depending on what data is\n * available to the caller:\n * Method 1:\n * a = text1, b = text2\n * Method 2:\n * a = diffs\n * Method 3 (optimal):\n * a = text1, b = diffs\n * Method 4 (deprecated, use method 3):\n * a = text1, b = text2, c = diffs\n *\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\n * Array of diff tuples for text1 to text2 (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_b text2 (methods 1,4) or\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_c Array of diff tuples\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_make = function(a, opt_b, opt_c) {\n  var text1, diffs;\n  if (typeof a == 'string' && typeof opt_b == 'string' &&\n      typeof opt_c == 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 = /** @type {string} */(a);\n    diffs = this.diff_main(text1, /** @type {string} */(opt_b), true);\n    if (diffs.length > 2) {\n      this.diff_cleanupSemantic(diffs);\n      this.diff_cleanupEfficiency(diffs);\n    }\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' &&\n      typeof opt_c == 'undefined') {\n    // Method 2: diffs\n    // Compute text1 from diffs.\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(a);\n    text1 = this.diff_text1(diffs);\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' &&\n      typeof opt_c == 'undefined') {\n    // Method 3: text1, diffs\n    text1 = /** @type {string} */(a);\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_b);\n  } else if (typeof a == 'string' && typeof opt_b == 'string' &&\n      opt_c && typeof opt_c == 'object') {\n    // Method 4: text1, text2, diffs\n    // text2 is not used.\n    text1 = /** @type {string} */(a);\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_c);\n  } else {\n    throw new Error('Unknown call format to patch_make.');\n  }\n\n  if (diffs.length === 0) {\n    return [];  // Get rid of the null case.\n  }\n  var patches = [];\n  var patch = new diff_match_patch.patch_obj();\n  var patchDiffLength = 0;  // Keeping our own length var is faster in JS.\n  var char_count1 = 0;  // Number of characters into the text1 string.\n  var char_count2 = 0;  // Number of characters into the text2 string.\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\n  // context info.\n  var prepatch_text = text1;\n  var postpatch_text = text1;\n  for (var x = 0; x < diffs.length; x++) {\n    var diff_type = diffs[x][0];\n    var diff_text = diffs[x][1];\n\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = char_count1;\n      patch.start2 = char_count2;\n    }\n\n    switch (diff_type) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = diffs[x];\n        patch.length2 += diff_text.length;\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text +\n                         postpatch_text.substring(char_count2);\n        break;\n      case DIFF_DELETE:\n        patch.length1 += diff_text.length;\n        patch.diffs[patchDiffLength++] = diffs[x];\n        postpatch_text = postpatch_text.substring(0, char_count2) +\n                         postpatch_text.substring(char_count2 +\n                             diff_text.length);\n        break;\n      case DIFF_EQUAL:\n        if (diff_text.length <= 2 * this.Patch_Margin &&\n            patchDiffLength && diffs.length != x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = diffs[x];\n          patch.length1 += diff_text.length;\n          patch.length2 += diff_text.length;\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            this.patch_addContext_(patch, prepatch_text);\n            patches.push(patch);\n            patch = new diff_match_patch.patch_obj();\n            patchDiffLength = 0;\n            // Unlike Unidiff, our patch lists have a rolling context.\n            // https://github.com/google/diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n            prepatch_text = postpatch_text;\n            char_count1 = char_count2;\n          }\n        }\n        break;\n    }\n\n    // Update the current character count.\n    if (diff_type !== DIFF_INSERT) {\n      char_count1 += diff_text.length;\n    }\n    if (diff_type !== DIFF_DELETE) {\n      char_count2 += diff_text.length;\n    }\n  }\n  // Pick up the leftover patch if not empty.\n  if (patchDiffLength) {\n    this.patch_addContext_(patch, prepatch_text);\n    patches.push(patch);\n  }\n\n  return patches;\n};\n\n\n/**\n * Given an array of patches, return another array that is identical.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_deepCopy = function(patches) {\n  // Making deep copies is hard in JavaScript.\n  var patchesCopy = [];\n  for (var x = 0; x < patches.length; x++) {\n    var patch = patches[x];\n    var patchCopy = new diff_match_patch.patch_obj();\n    patchCopy.diffs = [];\n    for (var y = 0; y < patch.diffs.length; y++) {\n      patchCopy.diffs[y] =\n          new diff_match_patch.Diff(patch.diffs[y][0], patch.diffs[y][1]);\n    }\n    patchCopy.start1 = patch.start1;\n    patchCopy.start2 = patch.start2;\n    patchCopy.length1 = patch.length1;\n    patchCopy.length2 = patch.length2;\n    patchesCopy[x] = patchCopy;\n  }\n  return patchesCopy;\n};\n\n\n/**\n * Merge a set of patches onto the text.  Return a patched text, as well\n * as a list of true/false values indicating which patches were applied.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @param {string} text Old text.\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\n *      new text and an array of boolean values.\n */\ndiff_match_patch.prototype.patch_apply = function(patches, text) {\n  if (patches.length == 0) {\n    return [text, []];\n  }\n\n  // Deep copy the patches so that no changes are made to originals.\n  patches = this.patch_deepCopy(patches);\n\n  var nullPadding = this.patch_addPadding(patches);\n  text = nullPadding + text + nullPadding;\n\n  this.patch_splitMax(patches);\n  // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n  var delta = 0;\n  var results = [];\n  for (var x = 0; x < patches.length; x++) {\n    var expected_loc = patches[x].start2 + delta;\n    var text1 = this.diff_text1(patches[x].diffs);\n    var start_loc;\n    var end_loc = -1;\n    if (text1.length > this.Match_MaxBits) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits),\n                                  expected_loc);\n      if (start_loc != -1) {\n        end_loc = this.match_main(text,\n            text1.substring(text1.length - this.Match_MaxBits),\n            expected_loc + text1.length - this.Match_MaxBits);\n        if (end_loc == -1 || start_loc >= end_loc) {\n          // Can't find valid trailing context.  Drop this patch.\n          start_loc = -1;\n        }\n      }\n    } else {\n      start_loc = this.match_main(text, text1, expected_loc);\n    }\n    if (start_loc == -1) {\n      // No match found.  :(\n      results[x] = false;\n      // Subtract the delta for this failed patch from subsequent patches.\n      delta -= patches[x].length2 - patches[x].length1;\n    } else {\n      // Found a match.  :)\n      results[x] = true;\n      delta = start_loc - expected_loc;\n      var text2;\n      if (end_loc == -1) {\n        text2 = text.substring(start_loc, start_loc + text1.length);\n      } else {\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\n      }\n      if (text1 == text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, start_loc) +\n               this.diff_text2(patches[x].diffs) +\n               text.substring(start_loc + text1.length);\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        var diffs = this.diff_main(text1, text2, false);\n        if (text1.length > this.Match_MaxBits &&\n            this.diff_levenshtein(diffs) / text1.length >\n            this.Patch_DeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false;\n        } else {\n          this.diff_cleanupSemanticLossless(diffs);\n          var index1 = 0;\n          var index2;\n          for (var y = 0; y < patches[x].diffs.length; y++) {\n            var mod = patches[x].diffs[y];\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = this.diff_xIndex(diffs, index1);\n            }\n            if (mod[0] === DIFF_INSERT) {  // Insertion\n              text = text.substring(0, start_loc + index2) + mod[1] +\n                     text.substring(start_loc + index2);\n            } else if (mod[0] === DIFF_DELETE) {  // Deletion\n              text = text.substring(0, start_loc + index2) +\n                     text.substring(start_loc + this.diff_xIndex(diffs,\n                         index1 + mod[1].length));\n            }\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length;\n            }\n          }\n        }\n      }\n    }\n  }\n  // Strip the padding off.\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\n  return [text, results];\n};\n\n\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} The padding string added to each side.\n */\ndiff_match_patch.prototype.patch_addPadding = function(patches) {\n  var paddingLength = this.Patch_Margin;\n  var nullPadding = '';\n  for (var x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x);\n  }\n\n  // Bump all the patches forward.\n  for (var x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength;\n    patches[x].start2 += paddingLength;\n  }\n\n  // Add some padding on start of first diff.\n  var patch = patches[0];\n  var diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.start1 -= paddingLength;  // Should be 0.\n    patch.start2 -= paddingLength;  // Should be 0.\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    var extraLength = paddingLength - diffs[0][1].length;\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n    patch.start1 -= extraLength;\n    patch.start2 -= extraLength;\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  // Add some padding on end of last diff.\n  patch = patches[patches.length - 1];\n  diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  return nullPadding;\n};\n\n\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_splitMax = function(patches) {\n  var patch_size = this.Match_MaxBits;\n  for (var x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patch_size) {\n      continue;\n    }\n    var bigpatch = patches[x];\n    // Remove the big old patch.\n    patches.splice(x--, 1);\n    var start1 = bigpatch.start1;\n    var start2 = bigpatch.start2;\n    var precontext = '';\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      var patch = new diff_match_patch.patch_obj();\n      var empty = true;\n      patch.start1 = start1 - precontext.length;\n      patch.start2 = start2 - precontext.length;\n      if (precontext !== '') {\n        patch.length1 = patch.length2 = precontext.length;\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, precontext));\n      }\n      while (bigpatch.diffs.length !== 0 &&\n             patch.length1 < patch_size - this.Patch_Margin) {\n        var diff_type = bigpatch.diffs[0][0];\n        var diff_text = bigpatch.diffs[0][1];\n        if (diff_type === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diff_text.length;\n          start2 += diff_text.length;\n          patch.diffs.push(bigpatch.diffs.shift());\n          empty = false;\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 &&\n                   patch.diffs[0][0] == DIFF_EQUAL &&\n                   diff_text.length > 2 * patch_size) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          empty = false;\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          bigpatch.diffs.shift();\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diff_text = diff_text.substring(0,\n              patch_size - patch.length1 - this.Patch_Margin);\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          if (diff_type === DIFF_EQUAL) {\n            patch.length2 += diff_text.length;\n            start2 += diff_text.length;\n          } else {\n            empty = false;\n          }\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          if (diff_text == bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift();\n          } else {\n            bigpatch.diffs[0][1] =\n                bigpatch.diffs[0][1].substring(diff_text.length);\n          }\n        }\n      }\n      // Compute the head context for the next patch.\n      precontext = this.diff_text2(patch.diffs);\n      precontext =\n          precontext.substring(precontext.length - this.Patch_Margin);\n      // Append the end context for this patch.\n      var postcontext = this.diff_text1(bigpatch.diffs)\n                            .substring(0, this.Patch_Margin);\n      if (postcontext !== '') {\n        patch.length1 += postcontext.length;\n        patch.length2 += postcontext.length;\n        if (patch.diffs.length !== 0 &&\n            patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\n        } else {\n          patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, postcontext));\n        }\n      }\n      if (!empty) {\n        patches.splice(++x, 0, patch);\n      }\n    }\n  }\n};\n\n\n/**\n * Take a list of patches and return a textual representation.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} Text representation of patches.\n */\ndiff_match_patch.prototype.patch_toText = function(patches) {\n  var text = [];\n  for (var x = 0; x < patches.length; x++) {\n    text[x] = patches[x];\n  }\n  return text.join('');\n};\n\n\n/**\n * Parse a textual representation of patches and return a list of Patch objects.\n * @param {string} textline Text representation of patches.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n * @throws {!Error} If invalid input.\n */\ndiff_match_patch.prototype.patch_fromText = function(textline) {\n  var patches = [];\n  if (!textline) {\n    return patches;\n  }\n  var text = textline.split('\\n');\n  var textPointer = 0;\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\n  while (textPointer < text.length) {\n    var m = text[textPointer].match(patchHeader);\n    if (!m) {\n      throw new Error('Invalid patch string: ' + text[textPointer]);\n    }\n    var patch = new diff_match_patch.patch_obj();\n    patches.push(patch);\n    patch.start1 = parseInt(m[1], 10);\n    if (m[2] === '') {\n      patch.start1--;\n      patch.length1 = 1;\n    } else if (m[2] == '0') {\n      patch.length1 = 0;\n    } else {\n      patch.start1--;\n      patch.length1 = parseInt(m[2], 10);\n    }\n\n    patch.start2 = parseInt(m[3], 10);\n    if (m[4] === '') {\n      patch.start2--;\n      patch.length2 = 1;\n    } else if (m[4] == '0') {\n      patch.length2 = 0;\n    } else {\n      patch.start2--;\n      patch.length2 = parseInt(m[4], 10);\n    }\n    textPointer++;\n\n    while (textPointer < text.length) {\n      var sign = text[textPointer].charAt(0);\n      try {\n        var line = decodeURI(text[textPointer].substring(1));\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error('Illegal escape in patch_fromText: ' + line);\n      }\n      if (sign == '-') {\n        // Deletion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_DELETE, line));\n      } else if (sign == '+') {\n        // Insertion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_INSERT, line));\n      } else if (sign == ' ') {\n        // Minor equality.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, line));\n      } else if (sign == '@') {\n        // Start of next patch.\n        break;\n      } else if (sign === '') {\n        // Blank line?  Whatever.\n      } else {\n        // WTF?\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n      }\n      textPointer++;\n    }\n  }\n  return patches;\n};\n\n\n/**\n * Class representing one patch operation.\n * @constructor\n */\ndiff_match_patch.patch_obj = function() {\n  /** @type {!Array.<!diff_match_patch.Diff>} */\n  this.diffs = [];\n  /** @type {?number} */\n  this.start1 = null;\n  /** @type {?number} */\n  this.start2 = null;\n  /** @type {number} */\n  this.length1 = 0;\n  /** @type {number} */\n  this.length2 = 0;\n};\n\n\n/**\n * Emulate GNU diff's format.\n * Header: @@ -382,8 +481,9 @@\n * Indices are printed as 1-based, not 0-based.\n * @return {string} The GNU diff string.\n */\ndiff_match_patch.patch_obj.prototype.toString = function() {\n  var coords1, coords2;\n  if (this.length1 === 0) {\n    coords1 = this.start1 + ',0';\n  } else if (this.length1 == 1) {\n    coords1 = this.start1 + 1;\n  } else {\n    coords1 = (this.start1 + 1) + ',' + this.length1;\n  }\n  if (this.length2 === 0) {\n    coords2 = this.start2 + ',0';\n  } else if (this.length2 == 1) {\n    coords2 = this.start2 + 1;\n  } else {\n    coords2 = (this.start2 + 1) + ',' + this.length2;\n  }\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\n  var op;\n  // Escape the body of the patch with %xx notation.\n  for (var x = 0; x < this.diffs.length; x++) {\n    switch (this.diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+';\n        break;\n      case DIFF_DELETE:\n        op = '-';\n        break;\n      case DIFF_EQUAL:\n        op = ' ';\n        break;\n    }\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\n  }\n  return text.join('').replace(/%20/g, ' ');\n};\n\n\n// The following export code was added by @ForbesLindesay\nmodule.exports = diff_match_patch;\nmodule.exports['diff_match_patch'] = diff_match_patch;\nmodule.exports['DIFF_DELETE'] = DIFF_DELETE;\nmodule.exports['DIFF_INSERT'] = DIFF_INSERT;\nmodule.exports['DIFF_EQUAL'] = DIFF_EQUAL;","/**\n * Delimiters regex.\n * Override it to change templating delimiters.\n */\nexport let delimitersRegex = new RegExp('{{(.*?)}}', 'gm');\n/**\n * Get processed value from values bag.\n * Can return string / number / boolean ... Value is not casted to string.\n * Will call function if value is a function, and will return function result.\n * @param valueName Property name of the value to get from value bag\n * @param values One level deep value bag containing properties and values as scalar or functions\n */\nfunction processValue(valueName, values) {\n    // Silently fail as empty string if value is not found\n    if (!(valueName in values))\n        return '';\n    // Get raw value\n    const value = values[valueName];\n    // Call function or return value\n    return (typeof value === 'function' ? value.call(values, values) : value);\n}\n/**\n * Called each time the regex find an mustache delimited variable\n * @param match Detected mustache match ( without delimiters )\n * @param values One level deep value bag containing properties and values as scalar or functions\n */\nfunction matcher(match, values) {\n    // Removed spaces\n    const trimmed = match.trim();\n    // Try to detect ternaries\n    const ternaryDelimiter0 = trimmed.indexOf('?');\n    const ternaryDelimiter1 = trimmed.indexOf(':');\n    if (ternaryDelimiter0 > 0) {\n        // Get value name from ternary ( valueName ? truePart : falsePart ) and then get processed value\n        const ternaryValueName = trimmed.substring(0, ternaryDelimiter0).trim();\n        const ternaryCondition = processValue(ternaryValueName, values);\n        // Execute condition and return trimmed truePart or trimmed falsePart\n        return (\n        // Truthy\n        ternaryCondition\n            ? trimmed.substring(ternaryDelimiter0 + 1, ternaryDelimiter1).trim()\n            // Falsy\n            : (\n            // Show second par after semicolon if falsy\n            // Or show empty string if there is no semicolon\n            ternaryDelimiter1 > 0\n                ? trimmed.substring(ternaryDelimiter1 + 1, trimmed.length).trim()\n                : ''));\n    }\n    // No ternary, process value\n    return processValue(trimmed, values);\n}\n/**\n * Process a template as string with values.\n * Values needs to be a one level deep associative object ( key : value ).\n * Why do you need Nanostache since literal template strings are available in ES6+ ?\n * Nanostache can be useful when any templating is needed when the template source is not coming\n * from javascript itself. For example, if you need to process a template from a file, or\n * any other kind of input.\n *\n * Example :\n * Nanostache('Hello {{username}}', {\n *   username: 'James Bond'\n * });\n * -> 'Hello James Bond'\n *\n * Values can be functions :\n * const user = { balance : 12 };\n * Nanostache('Your current balance is {{balance}}€', {\n *   balance: () => user.balance\n * });\n * -> 'Your current balance is 12€'\n *\n * Ternary conditions can be used :\n * Nanostache('Condition is {{test ? truthy : falsy}}', {\n *   test: 0\n * });\n * -> 'Condition is falsy'\n *\n * Or, with the help of functions :\n * Nanostache('{{name}} is {{age}} {{isAgePlural ? years : year}} old', {\n *    name: 'Brad Pitt',\n *    age: 55,\n *    // Note that v here is the current value object\n *    // So we can access dynamically to the age property\n *    isAgePlural: v => v.age > 1\n * });\n * -> 'Brad Pitt is 55 years old'\n *\n * Complex example mixing functions and ternaries :\n * const user = {\n *     name: 'James Bond',\n *     gender: 'male',\n *     balance: 15\n * }\n * Nanostache('Hello {{ isMale ? mr : mrs }} {{ getLastName }}. Your balance is {{ balance }}€.', {\n *   ...user,\n *   isMale: v => v.gender == 'male',\n *   getLastName: v => v.name.split(' ')[1]\n * });\n * -> 'Hello mr Bond. Your balance is 15€.'\n *\n * @param template Template to process with delimiters and values.\n * @param values One level deep value bag containing properties and values as scalar or functions\n */\nexport function Nanostache(template, values) {\n    return template.replace(delimitersRegex, (i, m) => matcher(m, values));\n}\n","/**\n * better-dom: Live extension playground\n * @version 4.1.0 Tue, 24 Mar 2020 09:55:50 GMT\n * @link https://github.com/chemerisuk/better-dom\n * @copyright 2020 Maksim Chemerisuk\n * @license MIT\n */\n(function () {\n  \"use strict\";\n  var WINDOW = window;\n  var DOCUMENT = document;\n  var HTML = DOCUMENT.documentElement;\n\n  var UNKNOWN_NODE = 0;\n  var ELEMENT_NODE = DOCUMENT.ELEMENT_NODE;\n  var DOCUMENT_NODE = DOCUMENT.DOCUMENT_NODE;\n  var VENDOR_PREFIXES = [\"Webkit\", \"O\", \"Moz\", \"ms\"];\n  var FAKE_ANIMATION_NAME = \"v__40100__\";\n  var SHEET_PROP_NAME = \"__40100__sheet\";\n\n  var WEBKIT_PREFIX = WINDOW.WebKitAnimationEvent ? \"-webkit-\" : \"\";\n\n  var util$index$$arrayProto = Array.prototype;\n\n  var util$index$$every = util$index$$arrayProto.every;\n  var util$index$$each = util$index$$arrayProto.forEach;\n  var util$index$$filter = util$index$$arrayProto.filter;\n  var util$index$$map = util$index$$arrayProto.map;\n  var util$index$$slice = util$index$$arrayProto.slice;\n  var util$index$$isArray = Array.isArray;\n  var util$index$$keys = Object.keys;\n  var util$index$$raf = WINDOW.requestAnimationFrame;\n\n  function util$index$$computeStyle(node) {\n    return node.ownerDocument.defaultView.getComputedStyle(node);\n  }\n\n  function util$index$$injectElement(node) {\n    if (node && node.nodeType === ELEMENT_NODE) {\n      return node.ownerDocument.getElementsByTagName(\"head\")[0].appendChild(node);\n    }\n  }\n  function MethodError(methodName, args, type) {if (type === void 0) {type = \"$Element\";}\n    var url = \"http://chemerisuk.github.io/better-dom/\" + type + \".html#\" + methodName,\n    line = \"invalid call `\" + type + (type === \"DOM\" ? \".\" : \"#\") + methodName + \"(\";\n\n    line += util$index$$map.call(args, String).join(\", \") + \")`. \";\n\n    this.message = line + \"Check \" + url + \" to verify the arguments\";\n  }\n\n  MethodError.prototype = new TypeError();\n\n  function StaticMethodError(methodName, args) {\n    MethodError.call(this, methodName, args, \"DOM\");\n  }\n\n  StaticMethodError.prototype = new TypeError();\n\n  function DocumentTypeError(methodName, args) {\n    MethodError.call(this, methodName, args, \"$Document\");\n  }\n\n  DocumentTypeError.prototype = new TypeError();\n  function $Node(node) {\n    if (node) {\n      this[0] = node;\n      // use a generated property to store a reference\n      // to the wrapper for circular object binding\n      node[\"__40100__\"] = this;\n    }\n  }\n\n  $Node.prototype = {\n    toString: function toString() {return \"\";},\n    valueOf: function valueOf() {return UNKNOWN_NODE;} // undefined\n  };\n\n  // fake animation for live extensions\n  var STYLE_NODE_HTML = \"@\" + WEBKIT_PREFIX + \"keyframes \" + FAKE_ANIMATION_NAME + \" {from {opacity:.99} to {opacity:1}}\";\n\n  function $Document(node) {\n    if (this instanceof $Document) {\n      // initialize state and all internal properties\n      $Node.call(this, node);\n      // add style element to append required css\n      var styleNode = node.createElement(\"style\");\n      styleNode.innerHTML = STYLE_NODE_HTML;\n      util$index$$injectElement(styleNode);\n      // store sheet object internally to use in importStyles later\n      node[SHEET_PROP_NAME] = styleNode.sheet || styleNode.styleSheet;\n    } else if (node) {\n      // create a new wrapper or return existing object\n      return node[\"__40100__\"] || new $Document(node);\n    } else {\n      return new $Document();\n    }\n  }\n\n  var DocumentProto = new $Node();\n\n  $Document.prototype = DocumentProto;\n\n  DocumentProto.valueOf = function () {\n    var node = this[0];\n    return node ? DOCUMENT_NODE : UNKNOWN_NODE;\n  };\n\n  DocumentProto.toString = function () {return \"#document\";};\n  function $Element(node) {\n    if (this instanceof $Element) {\n      $Node.call(this, node);\n    } else if (node) {\n      // create a new wrapper or return existing object\n      return node[\"__40100__\"] || new $Element(node);\n    } else {\n      return new $Element();\n    }\n  }\n\n  var ElementProto = new $Node();\n\n  $Element.prototype = ElementProto;\n\n  ElementProto.valueOf = function () {\n    var node = this[0];\n    return node ? ELEMENT_NODE : UNKNOWN_NODE;\n  };\n\n  ElementProto.toString = function () {\n    var node = this[0];\n\n    return node ? \"<\" + node.tagName.toLowerCase() + \">\" : \"#unknown\";\n  };\n\n  var index$$DOM = new $Document(WINDOW.document);\n  var index$$_DOM = WINDOW.DOM;\n\n  index$$DOM.constructor = function (node) {\n    var nodeType = node && node.nodeType;\n\n    if (nodeType === ELEMENT_NODE) {\n      return $Element(node);\n    } else if (nodeType === DOCUMENT_NODE) {\n      return $Document(node);\n    } else {\n      return new $Node(node);\n    }\n  };\n\n  index$$DOM.noConflict = function () {\n    if (WINDOW.DOM === index$$DOM) {\n      WINDOW.DOM = index$$_DOM;\n    }\n\n    return index$$DOM;\n  };\n\n  WINDOW.DOM = index$$DOM;\n\n  var document$create$$reQuick = /^<([a-zA-Z-]+)\\/?>$/;\n  var document$create$$sandbox = DOCUMENT.createElement(\"body\");\n\n  function document$create$$makeMethod(all) {\n    return function (value) {\n      var node = this[0];\n\n      if (!node || typeof value !== \"string\") {\n        throw new MethodError(\"create\" + all, arguments);\n      }\n\n      var result = all ? [] : null;\n\n      var quickMatch = !result && document$create$$reQuick.exec(value);\n      if (quickMatch) {\n        return new $Element(node.createElement(quickMatch[1]));\n      }\n\n      document$create$$sandbox.innerHTML = value.trim(); // parse HTML string\n\n      for (var it; it = document$create$$sandbox.firstElementChild;) {\n        document$create$$sandbox.removeChild(it); // detach element from the sandbox\n\n        if (node !== DOCUMENT) {\n          // adopt node for external documents\n          it = node.adoptNode(it);\n        }\n\n        if (result) {\n          result.push(new $Element(it));\n        } else {\n          result = new $Element(it);\n          // need only the first element\n          break;\n        }\n      }\n\n      return result || new $Element();\n    };\n  }\n\n\n  $Document.prototype.create = document$create$$makeMethod(\"\");\n\n  $Document.prototype.createAll = document$create$$makeMethod(\"All\");\n\n  // Helper for css selectors\n\n  var util$selectormatcher$$rquickIs = /^(\\w*)(?:#([\\w\\-]+))?(?:\\[([\\w\\-\\=]+)\\])?(?:\\.([\\w\\-]+))?$/,\n  util$selectormatcher$$propName = VENDOR_PREFIXES.concat(null).\n  map(function (p) {return (p ? p.toLowerCase() + \"M\" : \"m\") + \"atchesSelector\";}).\n  reduceRight(function (propName, p) {return propName || p in HTML && p;}, null);\n\n  var util$selectormatcher$$default = function util$selectormatcher$$default(selector, context) {\n    if (typeof selector !== \"string\") return null;\n\n    var quick = util$selectormatcher$$rquickIs.exec(selector);\n\n    if (quick) {\n      // Quick matching is inspired by jQuery:\n      //   0  1    2   3          4\n      // [ _, tag, id, attribute, class ]\n      if (quick[1]) quick[1] = quick[1].toLowerCase();\n      if (quick[3]) quick[3] = quick[3].split(\"=\");\n      if (quick[4]) quick[4] = \" \" + quick[4] + \" \";\n    }\n\n    return function (node) {\n      var result, found;\n      if (!quick && !util$selectormatcher$$propName) {\n        found = (context || node.ownerDocument).querySelectorAll(selector);\n      }\n\n      for (; node && node.nodeType === 1; node = node.parentNode) {\n        if (quick) {\n          result =\n          (!quick[1] || node.nodeName.toLowerCase() === quick[1]) && (\n          !quick[2] || node.id === quick[2]) && (\n          !quick[3] || (quick[3][1] ? node.getAttribute(quick[3][0]) === quick[3][1] : node.hasAttribute(quick[3][0]))) && (\n          !quick[4] || (\" \" + node.className + \" \").indexOf(quick[4]) >= 0);\n\n        } else {\n          if (util$selectormatcher$$propName) {\n            result = node[util$selectormatcher$$propName](selector);\n          } else {\n            for (var i = 0, n = found.length; i < n; ++i) {\n              var n = found[i];\n\n              if (n === node) return n;\n            }\n          }\n        }\n\n        if (result || !context || node === context) break;\n      }\n\n      return result && node;\n    };\n  };\n\n  // Inspired by trick discovered by Daniel Buchner:\n  // https://github.com/csuwldcat/SelectorListener\n\n  var document$extend$$extensions = [];\n  var document$extend$$EVENT_TYPE = WEBKIT_PREFIX ? \"webkitAnimationStart\" : \"animationstart\";\n  var document$extend$$CSS_IMPORT_TEXT = [\n  WEBKIT_PREFIX + \"animation-name:\" + FAKE_ANIMATION_NAME + \" !important\",\n  WEBKIT_PREFIX + \"animation-duration:1ms !important\"].\n  join(\";\");\n\n  function document$extend$$applyLiveExtension(definition, node) {\n    var el = $Element(node);\n    var ctr = definition.constructor;\n    // apply all element mixins\n    Object.keys(definition).forEach(function (mixinName) {\n      var mixinProperty = definition[mixinName];\n      if (mixinProperty !== ctr) {\n        el[mixinName] = mixinProperty;\n      }\n    });\n\n    if (ctr) ctr.call(el);\n  }\n\n  $Document.prototype.extend = function (selector, definition) {\n    var node = this[0];\n\n    if (!node) return this;\n\n    if (arguments.length === 1 && typeof selector === \"object\") {\n      // handle case when $Document protytype is extended\n      util$index$$keys(selector).forEach(function (key) {\n        $Document.prototype[key] = selector[key];\n      });\n\n      return this;\n    } else if (selector === \"*\") {\n      // handle case when $Element protytype is extended\n      util$index$$keys(definition).forEach(function (key) {\n        $Element.prototype[key] = definition[key];\n      });\n\n      return this;\n    }\n\n    if (typeof definition === \"function\") {\n      definition = { constructor: definition };\n    }\n\n    if (!definition || typeof definition !== \"object\") {\n      throw new DocumentTypeError(\"extend\", arguments);\n    }\n\n    var matcher = util$selectormatcher$$default(selector);\n\n    document$extend$$extensions.push([matcher, definition]);\n    // use capturing to suppress internal animationstart events\n    node.addEventListener(document$extend$$EVENT_TYPE, function (e) {\n      var node = e.target;\n\n      if (e.animationName === FAKE_ANIMATION_NAME && matcher(node)) {\n        e.stopPropagation(); // this is an internal event\n        // prevent any future events\n        node.style.setProperty(WEBKIT_PREFIX + \"animation-name\", \"none\", \"important\");\n\n        document$extend$$applyLiveExtension(definition, node);\n      }\n    }, true);\n\n    // initialize extension manually to make sure that all elements\n    // have appropriate methods before they are used in other DOM.extend\n    // also fix cases when a matched element already has another LE\n    util$index$$each.call(node.querySelectorAll(selector), function (node) {\n      // prevent any future events\n      node.style.setProperty(WEBKIT_PREFIX + \"animation-name\", \"none\", \"important\");\n      // use timeout to invoke constructor safe and async\n      WINDOW.setTimeout(function () {\n        document$extend$$applyLiveExtension(definition, node);\n      }, 0);\n    });\n\n    // subscribe selector to a fake animation\n    this.importStyles(selector, document$extend$$CSS_IMPORT_TEXT);\n  };\n\n  $Document.prototype.mock = function (content) {\n    if (!content) return new $Element();\n\n    var result = this.create(content),\n    applyExtensions = function applyExtensions(node) {\n      document$extend$$extensions.forEach(function (args) {\n        var matcher = args[0];\n        var definition = args[1];\n\n        if (matcher(node)) {\n          document$extend$$applyLiveExtension(definition, node);\n        }\n      });\n\n      util$index$$each.call(node.children, applyExtensions);\n    };\n\n    if (document$extend$$extensions.length) {\n      applyExtensions(result[0]);\n    }\n\n    return result;\n  };\n\n  $Document.prototype.importScripts = function () {var _this = this,_arguments = arguments;for (var _len = arguments.length, urls = new Array(_len), _key = 0; _key < _len; _key++) {urls[_key] = arguments[_key];}\n    var callback = function callback() {\n      var node = _this[0];\n\n      if (!node) return;\n\n      var arg = urls.shift(),\n      argType = typeof arg,\n      script;\n\n      if (argType === \"string\") {\n        script = node.createElement(\"script\");\n        script.src = arg;\n        script.onload = callback;\n        script.async = true;\n\n        util$index$$injectElement(script);\n      } else if (argType === \"function\") {\n        arg();\n      } else if (arg) {\n        throw new DocumentTypeError(\"importScripts\", _arguments);\n      }\n    };\n\n    callback();\n  };\n\n  $Document.prototype.importStyles = function (selector, cssText) {\n    var node = this[0];\n\n    if (!node) return;\n\n    if (!cssText && typeof selector === \"string\") {\n      cssText = selector;\n      selector = \"@media screen\";\n    }\n\n    if (typeof selector !== \"string\" || typeof cssText !== \"string\") {\n      throw new DocumentTypeError(\"importStyles\", arguments);\n    }\n\n    var styleSheet = node[SHEET_PROP_NAME];\n    var lastIndex = styleSheet.cssRules.length;\n    // insert rules one by one:\n    // failed selector does not break others\n    selector.split(\",\").forEach(function (selector) {\n      try {\n        lastIndex = styleSheet.insertRule(selector + \"{\" + cssText + \"}\", lastIndex);\n      } catch (err) {\n        // silently ignore invalid rules\n      }\n    });\n  };\n\n  function element$children$$makeMethod(methodName, validSelectorType) {\n    return function (selector) {\n      if (selector && typeof selector !== validSelectorType) {\n        throw new MethodError(methodName, arguments);\n      }\n\n      var node = this[0];\n      var matcher = util$selectormatcher$$default(selector);\n      var children = node ? node.children : [];\n\n      if (typeof selector === \"number\") {\n        if (selector < 0) {\n          selector = children.length + selector;\n        }\n\n        return $Element(children[selector]);\n      } else {\n        if (matcher) {\n          return util$index$$filter.call(children, matcher).map($Element);\n        } else {\n          return util$index$$map.call(children, $Element);\n        }\n      }\n    };\n  }\n\n  $Element.prototype.child = element$children$$makeMethod(\"child\", \"number\");\n\n  $Element.prototype.children = element$children$$makeMethod(\"children\", \"string\");\n\n  var element$classes$$REGEXP_SPACE = /[\\n\\t\\r]/g;\n  var element$classes$$normalizedClass = function element$classes$$normalizedClass(node) {return (\" \" + node.className + \" \").replace(element$classes$$REGEXP_SPACE, \" \");};\n\n  $Element.prototype.hasClass = function (className) {\n    if (typeof className !== \"string\") {\n      throw new MethodError(\"hasClass\", arguments);\n    }\n\n    var node = this[0];\n    if (!node) return false;\n\n    if (node.classList) {\n      return node.classList.contains(className);\n    } else {\n      return element$classes$$normalizedClass(node).indexOf(\" \" + className + \" \") >= 0;\n    }\n  };\n\n  $Element.prototype.addClass = function () {var _this2 = this,_arguments2 = arguments;for (var _len2 = arguments.length, classNames = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {classNames[_key2] = arguments[_key2];}\n    var node = this[0];\n    if (node) {\n      classNames.forEach(function (className) {\n        if (typeof className !== \"string\") {\n          throw new MethodError(\"addClass\", _arguments2);\n        }\n        if (node.classList) {\n          node.classList.add(className);\n        } else if (!_this2.hasClass(className)) {\n          _this2[0].className += \" \" + className;\n        }\n      });\n    }\n\n    return this;\n  };\n\n  $Element.prototype.removeClass = function () {var _arguments3 = arguments;for (var _len3 = arguments.length, classNames = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {classNames[_key3] = arguments[_key3];}\n    var node = this[0];\n    if (node) {\n      classNames.forEach(function (className) {\n        if (typeof className !== \"string\") {\n          throw new MethodError(\"removeClass\", _arguments3);\n        }\n        if (node.classList) {\n          node.classList.remove(className);\n        } else {\n          node.className = element$classes$$normalizedClass(node).replace(\" \" + className + \" \", \" \").trim();\n        }\n      });\n    }\n\n    return this;\n  };\n\n  $Element.prototype.toggleClass = function (className, force) {\n    if (typeof className !== \"string\") {\n      throw new MethodError(\"toggleClass\", arguments);\n    }\n\n    if (typeof force !== \"boolean\") {\n      force = !this.hasClass(className);\n    }\n\n    var node = this[0];\n    if (node) {\n      if (force) {\n        this.addClass(className);\n      } else {\n        this.removeClass(className);\n      }\n    }\n\n    return force;\n  };\n\n  // Helper for CSS properties access\n\n  var util$stylehooks$$reDash = /\\-./g,\n  util$stylehooks$$hooks = { get: {}, set: {}, find: function find(name, style) {\n      var propName = name.replace(util$stylehooks$$reDash, function (str) {return str[1].toUpperCase();});\n\n      if (!(propName in style)) {\n        propName = VENDOR_PREFIXES.\n        map(function (prefix) {return prefix + propName[0].toUpperCase() + propName.slice(1);}).\n        filter(function (prop) {return prop in style;})[0];\n      }\n\n      return this.get[name] = this.set[name] = propName;\n    } },\n  util$stylehooks$$directions = [\"Top\", \"Right\", \"Bottom\", \"Left\"],\n  util$stylehooks$$shortCuts = {\n    font: [\"fontStyle\", \"fontSize\", \"/\", \"lineHeight\", \"fontFamily\"],\n    padding: util$stylehooks$$directions.map(function (dir) {return \"padding\" + dir;}),\n    margin: util$stylehooks$$directions.map(function (dir) {return \"margin\" + dir;}),\n    \"border-width\": util$stylehooks$$directions.map(function (dir) {return \"border\" + dir + \"Width\";}),\n    \"border-style\": util$stylehooks$$directions.map(function (dir) {return \"border\" + dir + \"Style\";}) };\n\n\n  // normalize float css property\n  util$stylehooks$$hooks.get.float = util$stylehooks$$hooks.set.float = \"cssFloat\";\n\n  // Exclude the following css properties from adding suffix 'px'\n  \"fill-opacity font-weight line-height opacity orphans widows z-index zoom\".split(\" \").forEach(function (propName) {\n    var stylePropName = propName.replace(util$stylehooks$$reDash, function (str) {return str[1].toUpperCase();});\n\n    util$stylehooks$$hooks.get[propName] = stylePropName;\n    util$stylehooks$$hooks.set[propName] = function (value, style) {\n      style[stylePropName] = value.toString();\n    };\n  });\n\n  // normalize property shortcuts\n  util$index$$keys(util$stylehooks$$shortCuts).forEach(function (key) {\n    var props = util$stylehooks$$shortCuts[key];\n\n    util$stylehooks$$hooks.get[key] = function (style) {\n      var result = [],\n      hasEmptyStyleValue = function hasEmptyStyleValue(prop, index) {\n        result.push(prop === \"/\" ? prop : style[prop]);\n\n        return !result[index];\n      };\n\n      return props.some(hasEmptyStyleValue) ? \"\" : result.join(\" \");\n    };\n\n    util$stylehooks$$hooks.set[key] = function (value, style) {\n      if (value && \"cssText\" in style) {\n        // normalize setting a complex property across browsers\n        style.cssText += \";\" + key + \":\" + value;\n      } else {\n        props.forEach(function (name) {return style[name] = typeof value === \"number\" ? value + \"px\" : value.toString();});\n      }\n    };\n  });\n\n  var util$stylehooks$$default = util$stylehooks$$hooks;\n\n  $Element.prototype.css = function (name, value) {var _this3 = this;\n    var len = arguments.length;\n    var node = this[0];\n\n    if (!node) {\n      if (len === 1 && util$index$$isArray(name)) {\n        return {};\n      }\n\n      if (len !== 1 || typeof name !== \"string\") {\n        return this;\n      }\n\n      return;\n    }\n\n    var style = node.style;\n    var computed;\n\n    if (len === 1 && (typeof name === \"string\" || util$index$$isArray(name))) {\n      var strategy = function strategy(name) {\n        var getter = util$stylehooks$$default.get[name] || util$stylehooks$$default.find(name, style),\n        value = typeof getter === \"function\" ? getter(style) : style[getter];\n\n        if (!value) {\n          if (!computed) computed = util$index$$computeStyle(node);\n\n          value = typeof getter === \"function\" ? getter(computed) : computed[getter];\n        }\n\n        return value;\n      };\n\n      if (typeof name === \"string\") {\n        return strategy(name);\n      } else {\n        return name.map(strategy).reduce(function (memo, value, index) {\n          memo[name[index]] = value;\n\n          return memo;\n        }, {});\n      }\n    }\n\n    if (len === 2 && typeof name === \"string\") {\n      var setter = util$stylehooks$$default.set[name] || util$stylehooks$$default.find(name, style);\n\n      if (typeof value === \"function\") {\n        value = value(this);\n      }\n\n      if (value == null) value = \"\";\n\n      if (typeof setter === \"function\") {\n        setter(value, style);\n      } else {\n        style[setter] = typeof value === \"number\" ? value + \"px\" : value.toString();\n      }\n    } else if (len === 1 && name && typeof name === \"object\") {\n      util$index$$keys(name).forEach(function (key) {_this3.css(key, name[key]);});\n    } else {\n      throw new MethodError(\"css\", arguments);\n    }\n\n    return this;\n  };\n\n  function element$manipulation$$makeMethod(fastStrategy, requiresParent, strategy) {\n    return function () {var _this4 = this;\n      var node = this[0];\n\n      if (!node || requiresParent && !node.parentNode) return this;\n\n      // the idea of the algorithm is to construct HTML string\n      // when possible or use document fragment as a fallback to\n      // invoke manipulation using a single method call\n      var fragment = fastStrategy ? \"\" : node.ownerDocument.createDocumentFragment();for (var _len4 = arguments.length, contents = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {contents[_key4] = arguments[_key4];}\n\n      contents.forEach(function (content) {\n        if (typeof content === \"function\") {\n          content = content(_this4);\n        }\n\n        if (typeof content === \"string\") {\n          if (typeof fragment === \"string\") {\n            fragment += content.trim();\n          } else {\n            content = $Document(node.ownerDocument).createAll(content);\n          }\n        } else if (content instanceof $Element) {\n          content = [content];\n        }\n\n        if (util$index$$isArray(content)) {\n          if (typeof fragment === \"string\") {\n            // append existing string to fragment\n            content = $Document(node.ownerDocument).createAll(fragment).concat(content);\n            // fallback to document fragment strategy\n            fragment = node.ownerDocument.createDocumentFragment();\n          }\n\n          content.forEach(function (el) {\n            fragment.appendChild(el[0]);\n          });\n        }\n      });\n\n      if (typeof fragment === \"string\") {\n        node.insertAdjacentHTML(fastStrategy, fragment);\n      } else {\n        strategy(node, fragment);\n      }\n\n      return this;\n    };\n  }\n\n  $Element.prototype.after = element$manipulation$$makeMethod(\"afterend\", true, function (node, relatedNode) {\n    node.parentNode.insertBefore(relatedNode, node.nextSibling);\n  });\n\n  $Element.prototype.before = element$manipulation$$makeMethod(\"beforebegin\", true, function (node, relatedNode) {\n    node.parentNode.insertBefore(relatedNode, node);\n  });\n\n  $Element.prototype.prepend = element$manipulation$$makeMethod(\"afterbegin\", false, function (node, relatedNode) {\n    node.insertBefore(relatedNode, node.firstChild);\n  });\n\n  $Element.prototype.append = element$manipulation$$makeMethod(\"beforeend\", false, function (node, relatedNode) {\n    node.appendChild(relatedNode);\n  });\n\n  $Element.prototype.replace = element$manipulation$$makeMethod(\"\", true, function (node, relatedNode) {\n    node.parentNode.replaceChild(relatedNode, node);\n  });\n\n  $Element.prototype.remove = element$manipulation$$makeMethod(\"\", true, function (node) {\n    node.parentNode.removeChild(node);\n  });\n\n  var util$selectorhooks$$default = {\n    \":focus\": function focus(node) {return node === node.ownerDocument.activeElement;}\n\n    // \":visible\": (node) => !isHidden(node),\n\n    // \":hidden\": isHidden\n  };\n\n  $Element.prototype.matches = function (selector) {\n    if (!selector || typeof selector !== \"string\") {\n      throw new MethodError(\"matches\", arguments);\n    }\n\n    var checker = util$selectorhooks$$default[selector] || util$selectormatcher$$default(selector);\n\n    return !!checker(this[0]);\n  };\n\n  $Element.prototype.offset = function () {\n    var node = this[0];\n    var result = { top: 0, left: 0, right: 0, bottom: 0, width: 0, height: 0 };\n\n    if (node) {\n      var docEl = (node.ownerDocument || node).documentElement;\n      var clientTop = docEl.clientTop;\n      var clientLeft = docEl.clientLeft;\n      var scrollTop = WINDOW.pageYOffset || docEl.scrollTop;\n      var scrollLeft = WINDOW.pageXOffset || docEl.scrollLeft;\n      var boundingRect = node.getBoundingClientRect();\n\n      result.top = boundingRect.top + scrollTop - clientTop;\n      result.left = boundingRect.left + scrollLeft - clientLeft;\n      result.right = boundingRect.right + scrollLeft - clientLeft;\n      result.bottom = boundingRect.bottom + scrollTop - clientTop;\n      result.width = boundingRect.right - boundingRect.left;\n      result.height = boundingRect.bottom - boundingRect.top;\n    }\n\n    return result;\n  };\n\n  function element$traversing$$makeMethod(methodName, propertyName, all) {\n    return function (selector) {\n      if (selector && typeof selector !== \"string\") {\n        throw new MethodError(methodName, arguments);\n      }\n\n      var node = this[0];\n      var result = all ? [] : null;\n\n      if (node) {\n        var matcher = util$selectormatcher$$default(selector);\n        // method closest starts traversing from the element itself\n        // except no selector was specified where it returns parent\n        if (node && (!matcher || methodName !== \"closest\")) {\n          node = node[propertyName];\n        }\n\n        for (var it = node; it; it = it[propertyName]) {\n          if (!matcher || matcher(it)) {\n            if (result) {\n              result.push($Element(it));\n            } else {\n              result = $Element(it);\n              // need only the first element\n              break;\n            }\n          }\n        }\n      }\n\n      return result || new $Element();\n    };\n  }\n\n  $Element.prototype.next = element$traversing$$makeMethod(\"next\", \"nextElementSibling\");\n\n  $Element.prototype.prev = element$traversing$$makeMethod(\"prev\", \"previousElementSibling\");\n\n  $Element.prototype.nextAll = element$traversing$$makeMethod(\"nextAll\", \"nextElementSibling\", true);\n\n  $Element.prototype.prevAll = element$traversing$$makeMethod(\"prevAll\", \"previousElementSibling\", true);\n\n  $Element.prototype.closest = element$traversing$$makeMethod(\"closest\", \"parentNode\");\n\n  $Element.prototype.value = function (content) {\n    var node = this[0];\n\n    if (!node) return content ? this : void 0;\n\n    var tagName = node.tagName;\n\n    if (content === void 0) {\n      if (tagName === \"SELECT\") {\n        return ~node.selectedIndex ? node.options[node.selectedIndex].value : \"\";\n      } else if (tagName === \"OPTION\") {\n        return node.hasAttribute(\"value\") ? node.value : node.text;\n      } else if (tagName === \"INPUT\" || tagName === \"TEXTAREA\") {\n        return node.value;\n      } else {\n        return node.textContent;\n      }\n    } else {\n      switch (tagName) {\n        case \"INPUT\":\n        case \"OPTION\":\n        case \"TEXTAREA\":\n          if (typeof content === \"function\") {\n            content = content(node.value);\n          }\n          node.value = content;\n          break;\n\n        case \"SELECT\":\n          if (typeof content === \"function\") {\n            content = content(node.value);\n          }\n          if (util$index$$every.call(node.options, function (o) {return !(o.selected = o.value === content);})) {\n            node.selectedIndex = -1;\n          }\n          break;\n\n        default:\n          if (typeof content === \"function\") {\n            content = content(node.textContent);\n          }\n          node.textContent = content;}\n\n\n      return this;\n    }\n  };\n\n\n  $Element.prototype.empty = function () {\n    return this.value(\"\");\n  };\n\n  var util$animationhandler$$TRANSITION_EVENT_TYPE = WEBKIT_PREFIX ? \"webkitTransitionEnd\" : \"transitionend\";\n  var util$animationhandler$$ANIMATION_EVENT_TYPE = WEBKIT_PREFIX ? \"webkitAnimationEnd\" : \"animationend\";\n\n  function util$animationhandler$$AnimationHandler(node, animationName) {\n    this.node = node;\n    this.style = node.style;\n    this.eventType = animationName ? util$animationhandler$$ANIMATION_EVENT_TYPE : util$animationhandler$$TRANSITION_EVENT_TYPE;\n    this.animationName = animationName;\n  }\n\n  util$animationhandler$$AnimationHandler.prototype = {\n    handleEvent: function handleEvent(e) {\n      if (!this.animationName || e.animationName === this.animationName) {\n        if (this.animationName) {\n          this.style.animationName = \"\";\n          this.style.animationDirection = \"\";\n        }\n\n        this.node.removeEventListener(this.eventType, this, true);\n\n        if (typeof this.callback === \"function\") {\n          this.callback();\n        }\n      }\n    },\n    start: function start(callback, animationDirection) {\n      this.callback = callback;\n\n      if (this.animationName) {\n        this.style.animationName = this.animationName;\n        this.style.animationDirection = animationDirection;\n      }\n\n      this.node.addEventListener(this.eventType, this, true);\n    } };\n\n\n  var util$animationhandler$$default = util$animationhandler$$AnimationHandler;\n\n  function element$visibility$$makeMethod(methodName, condition) {\n    return function (animationName, callback) {var _this5 = this;\n      if (typeof animationName !== \"string\") {\n        callback = animationName;\n        animationName = null;\n      }\n\n      if (callback && typeof callback !== \"function\") {\n        throw new MethodError(methodName, arguments);\n      }\n\n      var node = this[0];\n\n      if (!node) return this;\n\n      var computed = util$index$$computeStyle(node);\n      // Determine of we need animation by checking if an element\n      // has non-zero width. Triggers reflow but fixes animation\n      // for new elements inserted into the DOM in some browsers\n\n      if (node && computed.width) {\n        var complete = function complete() {\n          node.style.visibility = condition ? \"hidden\" : \"inherit\";\n\n          if (typeof callback === \"function\") {\n            callback(_this5);\n          }\n        };\n\n        if (!node.ownerDocument.documentElement.contains(node)) {\n          util$index$$raf(complete); // skip animating of detached elements\n        } else if (!animationName && parseFloat(computed[\"transition-duration\"]) === 0) {\n          util$index$$raf(complete); // skip animating with zero transition duration\n        } else if (animationName && parseFloat(computed[\"animation-duration\"]) === 0) {\n          util$index$$raf(complete); // skip animating with zero animation duration\n        } else {\n          // always make an element visible before animation start\n          node.style.visibility = \"visible\";\n\n          new util$animationhandler$$default(node, animationName).\n          start(complete, condition ? \"normal\" : \"reverse\");\n        }\n      }\n      // trigger CSS3 transition if it exists\n      return this.set(\"aria-hidden\", String(condition));\n    };\n  }\n\n  $Element.prototype.show = element$visibility$$makeMethod(\"show\", false);\n\n  $Element.prototype.hide = element$visibility$$makeMethod(\"hide\", true);\n\n  $Node.prototype.clone = function (deepCopy) {\n    if (typeof deepCopy !== \"boolean\") {\n      throw new MethodError(\"clone\", arguments);\n    }\n\n    var node = this[0];\n\n    if (node) {\n      var clonedNode = node.cloneNode(deepCopy);\n\n      if (this instanceof $Element) {\n        return new $Element(clonedNode);\n      } else if (this instanceof $Document) {\n        return new $Document(clonedNode);\n      }\n    }\n\n    return new $Node();\n  };\n\n  $Node.prototype.contains = function (element) {\n    var node = this[0];\n\n    if (!node) return false;\n\n    if (element instanceof $Element) {\n      var otherNode = element[0];\n\n      if (otherNode === node) return true;\n      if (node.contains) {\n        return node.contains(otherNode);\n      } else {\n        return node.compareDocumentPosition(otherNode) & 16;\n      }\n    }\n\n    throw new MethodError(\"contains\", arguments);\n  };\n\n  // big part of code inspired by Sizzle:\n  // https://github.com/jquery/sizzle/blob/master/sizzle.js\n\n  var node$find$$REGEXP_QUICK = /^(?:(\\w+)|\\.([\\w\\-]+))$/;\n  var node$find$$REGEXP_ESCAPE = /'|\\\\/g;\n\n  function node$find$$makeMethod(methodName, all) {\n    return function (selector) {\n      if (typeof selector !== \"string\") {\n        throw new MethodError(methodName, arguments);\n      }\n\n      var node = this[0];\n\n      if (!node) return all ? [] : new $Node();\n\n      var result;\n\n      if (this instanceof $Document || this instanceof $Element) {\n        var quickMatch = node$find$$REGEXP_QUICK.exec(selector);\n\n        if (quickMatch) {\n          if (quickMatch[1]) {\n            // speed-up: \"TAG\"\n            result = node.getElementsByTagName(selector);\n          } else {\n            // speed-up: \".CLASS\"\n            result = node.getElementsByClassName(quickMatch[2]);\n          }\n\n          if (result && !all) result = result[0];\n        } else if (this instanceof $Element) {\n          var id = node.getAttribute(\"id\");\n\n          // qSA works strangely on Element-rooted queries\n          // We can work around this by specifying an extra ID on the root\n          // and working up from there (Thanks to Andrew Dupont for the technique)\n\n          var prefix;\n          if (id) {\n            prefix = id.replace(node$find$$REGEXP_ESCAPE, \"\\\\$&\");\n          } else {\n            prefix = \"___40100__\";\n            // set fake id attribute value\n            node.setAttribute(\"id\", prefix);\n          }\n\n          prefix = \"[id='\" + prefix + \"'] \";\n          selector = prefix + selector.split(\",\").join(\",\" + prefix);\n\n          result = node[\"querySelector\" + all](selector);\n          // cleanup fake id attribute value\n          if (!id) node.removeAttribute(\"id\");\n        } else {\n          result = node[\"querySelector\" + all](selector);\n        }\n      } else {\n        result = node[\"querySelector\" + all](selector);\n      }\n\n      return all ? util$index$$map.call(result, $Element) : $Element(result);\n    };\n  }\n\n  $Node.prototype.find = node$find$$makeMethod(\"find\", \"\");\n\n  $Node.prototype.findAll = node$find$$makeMethod(\"findAll\", \"All\");\n\n  var util$eventhooks$$hooks = {};\n  if (\"onfocusin\" in HTML) {\n    util$eventhooks$$hooks.focus = function (handler) {handler._type = \"focusin\";};\n    util$eventhooks$$hooks.blur = function (handler) {handler._type = \"focusout\";};\n  } else {\n    // firefox doesn't support focusin/focusout events\n    util$eventhooks$$hooks.focus = util$eventhooks$$hooks.blur = function (handler) {\n      handler.options.capture = true;\n    };\n  }\n  if (DOCUMENT.createElement(\"input\").validity) {\n    util$eventhooks$$hooks.invalid = function (handler) {\n      handler.options.capture = true;\n    };\n  }\n\n  var util$eventhooks$$default = util$eventhooks$$hooks;\n\n  // https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\n  var util$eventhandler$$supportsPassive = false;\n  try {\n    var util$eventhandler$$opts = Object.defineProperty({}, \"passive\", {\n      get: function get() {\n        util$eventhandler$$supportsPassive = true;\n      } });\n\n    WINDOW.addEventListener(\"test\", null, util$eventhandler$$opts);\n  } catch (e) {}\n\n  function util$eventhandler$$EventHandler(context, node, options, args) {\n    this.context = context;\n    this.node = node;\n    this.options = options;\n    this.args = args;\n\n    if (options.selector) {\n      this.matcher = util$selectormatcher$$default(options.selector, node);\n    }\n  }\n\n  util$eventhandler$$EventHandler.prototype = {\n    handleEvent: function handleEvent(e) {\n      this.event = e;\n      // update value of currentTarget if selector exists\n      this.currentTarget = this.matcher ? this.matcher(e.target) : this.node;\n      // early stop when target doesn't match selector\n      if (this.currentTarget) {\n        if (this.options.once === true) {\n          this.unsubscribe();\n        }\n\n        var args = this.args.map(this.getEventProperty, this);\n        // prevent default if handler returns false\n        if (this.callback.apply(this.context, args) === false) {\n          e.preventDefault();\n        }\n      }\n    },\n    getEventProperty: function getEventProperty(name) {var _arguments4 = arguments;\n      var e = this.event;\n      if (name === \"type\") {\n        return this.type;\n      } else if (name === \"target\" || name === \"relatedTarget\") {\n        return $Element(e[name]);\n      } else if (name === \"currentTarget\") {\n        return $Element(this.currentTarget);\n      }\n\n      var value = e[name];\n      if (typeof value === \"function\") {\n        return function () {return value.apply(e, _arguments4);};\n      } else {\n        return value;\n      }\n    },\n    subscribe: function subscribe(type, callback) {\n      var hook = util$eventhooks$$default[type];\n\n      this.type = type;\n      this.callback = callback;\n\n      if (hook) hook(this);\n\n      this.node.addEventListener(this._type || this.type, this, this.getLastArgument());\n    },\n    unsubscribe: function unsubscribe() {\n      this.node.removeEventListener(this._type || this.type, this, this.getLastArgument());\n    },\n    getLastArgument: function getLastArgument() {\n      var lastArg = !!this.options.capture;\n      if (this.options.passive && util$eventhandler$$supportsPassive) {\n        lastArg = { passive: true, capture: lastArg };\n      }\n      return lastArg;\n    } };\n\n\n  var util$eventhandler$$default = util$eventhandler$$EventHandler;\n\n  $Node.prototype.fire = function (type, detail) {\n    var node = this[0];\n    var e, eventType, canContinue;\n\n    if (typeof type === \"string\") {\n      var hook = util$eventhooks$$default[type],\n      handler = { options: {} };\n\n      if (hook) handler = hook(handler) || handler;\n\n      eventType = handler._type || type;\n    } else {\n      throw new MethodError(\"fire\", arguments);\n    }\n\n    if (!node) return true;\n\n    e = (node.ownerDocument || node).createEvent(\"CustomEvent\");\n    e.initCustomEvent(eventType, true, true, detail);\n    canContinue = node.dispatchEvent(e);\n\n    // call native function to trigger default behavior\n    if (canContinue && node[type]) {\n      var _handleEvent = util$eventhandler$$default.prototype.handleEvent;\n      // intercept handleEvent to prevent double event callbacks\n      util$eventhandler$$default.prototype.handleEvent = function (e) {\n        // prevent re-triggering of the current event\n        if (this.type !== type) {\n          return _handleEvent.call(this, e);\n        }\n      };\n\n      node[type]();\n      // restore original method\n      util$eventhandler$$default.prototype.handleEvent = _handleEvent;\n    }\n\n    return canContinue;\n  };\n  var util$accessorhooks$$hooks = { get: {}, set: {} };\n\n  // fix camel cased attributes\n  \"tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable\".split(\" \").forEach(function (key) {\n    util$accessorhooks$$hooks.get[key.toLowerCase()] = function (node) {return node[key];};\n  });\n\n  // style hook\n  util$accessorhooks$$hooks.get.style = function (node) {return node.style.cssText;};\n  util$accessorhooks$$hooks.set.style = function (node, value) {node.style.cssText = value;};\n  // some browsers don't recognize input[type=email] etc.\n  util$accessorhooks$$hooks.get.type = function (node) {return node.getAttribute(\"type\") || node.type;};\n\n  var util$accessorhooks$$default = util$accessorhooks$$hooks;\n\n  $Node.prototype.get = function (name, defaultValue) {var _this6 = this;\n    var node = this[0];\n    var hook = util$accessorhooks$$default.get[name];\n    var value;\n\n    if (!node) return value;\n\n    if (arguments.length === 0) {\n      return node.innerHTML;\n    }\n\n    if (hook) {\n      value = hook(node, name);\n    } else if (typeof name === \"string\") {\n      if (name in node) {\n        value = node[name];\n      } else if (this instanceof $Element) {\n        value = node.getAttribute(name);\n      } else {\n        value = null;\n      }\n    } else if (util$index$$isArray(name)) {\n      value = name.reduce(function (memo, key) {\n        return memo[key] = _this6.get(key), memo;\n      }, {});\n    } else {\n      throw new MethodError(\"get\", arguments);\n    }\n\n    return value != null ? value : defaultValue;\n  };\n\n  $Node.prototype.on = function (type, options, args, callback) {\n    if (typeof type === \"string\") {\n      if (typeof options === \"string\") {\n        options = { selector: options };\n      } else if (typeof options === \"function\") {\n        callback = options;\n        options = {};\n        args = [];\n      } else if (typeof options === \"object\") {\n        if (util$index$$isArray(options)) {\n          callback = args;\n          args = options;\n          options = {};\n        }\n      }\n\n      if (typeof args === \"function\") {\n        callback = args;\n        args = [];\n      }\n\n      if (options && typeof options === \"object\" && typeof callback === \"function\") {\n        var node = this[0];\n\n        if (!node) return function () {};\n\n        var handler = new util$eventhandler$$default(this, node, options, args);\n        handler.subscribe(type, callback);\n        return function () {return handler.unsubscribe();};\n      }\n    }\n\n    throw new MethodError(\"on\", arguments);\n  };\n\n  $Node.prototype.set = function (name, value) {var _this7 = this;\n    var node = this[0];\n    var len = arguments.length;\n    var hook = util$accessorhooks$$default.set[name];\n\n    if (node) {\n      if (typeof name === \"string\") {\n        if (len === 1) {// innerHTML shortcut\n          value = name;\n          name = \"innerHTML\";\n        }\n\n        if (typeof value === \"function\") {\n          value = value(this.get(name));\n        }\n\n        if (hook) {\n          hook(node, value);\n        } else if (value == null && this instanceof $Element) {\n          node.removeAttribute(name);\n        } else if (name in node) {\n          node[name] = value;\n        } else if (this instanceof $Element) {\n          node.setAttribute(name, value);\n        }\n      } else if (util$index$$isArray(name)) {\n        if (len === 1) {\n          node.textContent = \"\"; // clear node children\n          this.append.apply(this, name);\n        } else {\n          name.forEach(function (key) {_this7.set(key, value);});\n        }\n      } else if (typeof name === \"object\") {\n        util$index$$keys(name).forEach(function (key) {_this7.set(key, name[key]);});\n      } else {\n        throw new MethodError(\"set\", arguments);\n      }\n    }\n\n    return this;\n  };\n})();","/**\n * better-dateinput-polyfill: input[type=date] polyfill for better-dom\n * @version 3.3.1 Thu, 03 Sep 2020 09:59:12 GMT\n * @link https://github.com/chemerisuk/better-dateinput-polyfill\n * @copyright 2020 Maksim Chemerisuk\n * @license MIT\n */\n(function () {\n  \"use strict\";\n\n  /* globals html:false */\n  var MAIN_CSS = \"dateinput-picker{display:inline-block;vertical-align:bottom;overflow:hidden;position:absolute;z-index:1000;width:336px;height:320px;max-height:320px;box-shadow:0 8px 24px #888;background:#fff;opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-transform-origin:0 0;transform-origin:0 0;transition:.1s ease-out}dateinput-picker[aria-hidden=true]{opacity:0;-webkit-transform:skew(-25deg) scaleX(.75);transform:skew(-25deg) scaleX(.75);visibility:hidden;height:0}dateinput-picker[aria-expanded=true]{height:220px;max-height:220px}dateinput-picker+input{color:transparent!important;caret-color:transparent!important}dateinput-picker+input::selection{color:rgba(0,0,0,.01);background:none}dateinput-picker+input::-moz-selection{background:none}\";\n  var HTML = DOM.find(\"html\");\n  var DEFAULT_LANGUAGE = HTML.get(\"lang\") || void 0;\n  var DEVICE_TYPE = \"orientation\" in window ? \"mobile\" : \"desktop\";\n\n  var TYPE_SUPPORTED = function () {\n    // use a stronger type support detection that handles old WebKit browsers:\n    // http://www.quirksmode.org/blog/archives/2015/03/better_modern_i.html\n    return DOM.create(\"<input type='date'>\").value(\"_\").value() !== \"_\";\n  }();\n\n  function formatLocalDate(date) {\n    return [date.getFullYear(), (\"0\" + (date.getMonth() + 1)).slice(-2), (\"0\" + date.getDate()).slice(-2)].join(\"-\");\n  }\n\n  function parseLocalDate(value) {\n    var parts = (value || \"?\").split(/\\D/).map(function (s) {\n      return parseInt(s);\n    });\n    var dateValue = new Date(parts[0], parts[1] - 1, parts[2], 0, 0);\n    return isNaN(dateValue.getTime()) ? null : dateValue;\n  }\n\n  var globalFormatters = DOM.findAll(\"meta[name^='data-format:']\").reduce(function (globalFormatters, meta) {\n    var key = meta.get(\"name\").split(\":\")[1].trim();\n    var formatOptions = JSON.parse(meta.get(\"content\"));\n\n    if (key) {\n      try {\n        globalFormatters[key] = new window.Intl.DateTimeFormat(DEFAULT_LANGUAGE, formatOptions);\n      } catch (err) {}\n    }\n\n    return globalFormatters;\n  }, {});\n  DOM.extend(\"input[type=date]\", {\n    constructor: function constructor() {\n      if (this._isPolyfillEnabled()) return false;\n      var svgTextOptions = this.css([\"color\", \"font-size\", \"font-family\", \"font-style\", \"line-height\", \"padding-left\", \"border-left-width\", \"text-indent\"]);\n      svgTextOptions.dx = [\"padding-left\", \"border-left-width\", \"text-indent\"].map(function (p) {\n        return parseFloat(svgTextOptions[p]);\n      }).reduce(function (a, b) {\n        return a + b;\n      });\n      svgTextOptions.css = [\"font-family\", \"font-style\", \"line-height\", \"font-size\"].map(function (p) {\n        return p + \":\" + svgTextOptions[p];\n      }).join(\";\").replace(/\"/g, \"\"); // FIXME: fix issue in html helper and drop replace below\n\n      this._backgroundTemplate = (\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"><text x=\\\"\" + svgTextOptions.dx + \"\\\" y=\\\"50%\\\" dy=\\\".35em\\\" fill=\\\"\" + svgTextOptions.color + \"\\\"></text></svg>\").replace(\"></\", \" style=\\\"\" + svgTextOptions.css + \"\\\"></\");\n      var picker = DOM.create(\"<dateinput-picker tabindex='-1'>\"); // store reference to the input\n\n      picker._parentInput = this; // add <dateinput-picker> to the document\n\n      this.before(picker.hide()); // store reference to the picker\n\n      this._picker = picker;\n\n      var resetDisplayedText = this._syncDisplayedText.bind(this, \"defaultValue\");\n\n      var updateDisplayedText = this._syncDisplayedText.bind(this, \"value\"); // patch value property for the input element\n\n\n      var valueDescriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, \"value\");\n      Object.defineProperty(this[0], \"value\", {\n        configurable: false,\n        enumerable: true,\n        get: valueDescriptor.get,\n        set: this._setValue.bind(this, valueDescriptor.set, updateDisplayedText)\n      });\n      Object.defineProperty(this[0], \"valueAsDate\", {\n        configurable: false,\n        enumerable: true,\n        get: this._getValueAsDate.bind(this),\n        set: this._setValueAsDate.bind(this)\n      }); // sync picker visibility on focus/blur\n\n      this.on(\"change\", updateDisplayedText);\n      this.on(\"focus\", this._focusInput.bind(this));\n      this.on(\"blur\", this._blurInput.bind(this));\n      this.on(\"keydown\", [\"which\"], this._keydownInput.bind(this));\n      this.on(\"click\", this._focusInput.bind(this)); // form events do not trigger any state change\n\n      this.closest(\"form\").on(\"reset\", resetDisplayedText);\n      resetDisplayedText(); // present initial value\n    },\n    _isPolyfillEnabled: function _isPolyfillEnabled() {\n      var polyfillType = this.get(\"data-polyfill\");\n      if (polyfillType === \"none\") return true;\n\n      if (polyfillType && (polyfillType === DEVICE_TYPE || polyfillType === \"all\")) {\n        // remove native browser implementation\n        this.set(\"type\", \"text\"); // force applying the polyfill\n\n        return false;\n      }\n\n      return TYPE_SUPPORTED;\n    },\n    _setValue: function _setValue(setter, updateDisplayedText, value) {\n      var dateValue = parseLocalDate(value);\n\n      if (!dateValue) {\n        value = \"\";\n      } else {\n        var min = parseLocalDate(this.get(\"min\"));\n        var max = parseLocalDate(this.get(\"max\"));\n\n        if (min && dateValue < min) {\n          value = formatLocalDate(min);\n        } else if (max && dateValue > max) {\n          value = formatLocalDate(max);\n        }\n      }\n\n      setter.call(this[0], value);\n      updateDisplayedText();\n    },\n    _getValueAsDate: function _getValueAsDate() {\n      return parseLocalDate(this.value());\n    },\n    _setValueAsDate: function _setValueAsDate(dateValue) {\n      if (dateValue instanceof Date && !isNaN(dateValue.getTime())) {\n        this.value(formatLocalDate(dateValue));\n      }\n    },\n    _syncDisplayedText: function _syncDisplayedText(propName) {\n      var displayText = this.get(propName);\n      var dateValue = parseLocalDate(displayText);\n\n      if (dateValue) {\n        var formatOptions = this.get(\"data-format\");\n        var formatter = globalFormatters[formatOptions];\n\n        try {\n          // set hours to '12' to fix Safari bug in Date#toLocaleString\n          var presentedDate = new Date(dateValue.getFullYear(), dateValue.getMonth(), dateValue.getDate(), 12);\n\n          if (formatter) {\n            displayText = formatter.format(presentedDate);\n          } else {\n            displayText = presentedDate.toLocaleDateString(DEFAULT_LANGUAGE, formatOptions ? JSON.parse(formatOptions) : {});\n          }\n        } catch (err) {}\n      }\n\n      this.css(\"background-image\", \"url('data:image/svg+xml,\" + encodeURIComponent(this._backgroundTemplate.replace(\"></\", \">\" + displayText + \"</\")) + \"')\");\n    },\n    _keydownInput: function _keydownInput(which) {\n      if (which === 13 && this._picker.get(\"aria-hidden\") === \"true\") {\n        // ENTER key should submit form if calendar is hidden\n        return true;\n      }\n\n      if (which === 32) {\n        // SPACE key toggles calendar visibility\n        if (!this.get(\"readonly\")) {\n          this._picker.toggleState(false);\n\n          this._picker.invalidateState();\n\n          if (this._picker.get(\"aria-hidden\") === \"true\") {\n            this._picker.show();\n          } else {\n            this._picker.hide();\n          }\n        }\n      } else if (which === 27 || which === 9 || which === 13) {\n        this._picker.hide(); // ESC, TAB or ENTER keys hide calendar\n\n      } else if (which === 8 || which === 46) {\n        this.empty().fire(\"change\"); // BACKSPACE, DELETE clear value\n      } else if (which === 17) {\n        // CONTROL toggles calendar mode\n        this._picker.toggleState();\n\n        this._picker.invalidateState();\n      } else {\n        var delta;\n\n        if (which === 74 || which === 40) {\n          delta = 7;\n        } else if (which === 75 || which === 38) {\n          delta = -7;\n        } else if (which === 76 || which === 39) {\n          delta = 1;\n        } else if (which === 72 || which === 37) {\n          delta = -1;\n        }\n\n        if (delta) {\n          var currentDate = this.get(\"valueAsDate\") || new Date();\n          var expanded = this._picker.get(\"aria-expanded\") === \"true\";\n\n          if (expanded && (which === 40 || which === 38)) {\n            currentDate.setMonth(currentDate.getMonth() + (delta > 0 ? 4 : -4));\n          } else if (expanded && (which === 37 || which === 39)) {\n            currentDate.setMonth(currentDate.getMonth() + (delta > 0 ? 1 : -1));\n          } else {\n            currentDate.setDate(currentDate.getDate() + delta);\n          }\n\n          this.value(formatLocalDate(currentDate)).fire(\"change\");\n        }\n      } // prevent default action except if it was TAB so\n      // do not allow to change the value manually\n\n\n      return which === 9;\n    },\n    _blurInput: function _blurInput() {\n      this._picker.hide();\n    },\n    _focusInput: function _focusInput() {\n      if (this.get(\"readonly\")) return false;\n      var offset = this.offset();\n\n      var pickerOffset = this._picker.offset();\n\n      var marginTop = offset.height; // #3: move calendar to the top when passing cross browser window bounds\n\n      if (HTML.get(\"clientHeight\") < offset.bottom + pickerOffset.height) {\n        marginTop = -pickerOffset.height;\n      } // always reset picker mode to the default\n\n\n      this._picker.toggleState(false);\n\n      this._picker.invalidateState(); // always recalculate picker top position\n\n\n      this._picker.css(\"margin-top\", marginTop).show();\n    }\n  });\n  DOM.importStyles(MAIN_CSS);\n})();\n(function () {\n  \"use strict\";\n\n  /* globals html:false */\n  var PICKER_CSS = \"body{overflow:hidden}*{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;line-height:2.5rem;text-align:center;cursor:default;-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:0}a{position:absolute;width:3rem;height:2.5rem}a[rel=prev]{left:0}a[rel=next]{right:0}b{display:block;cursor:pointer}table{width:100%;table-layout:fixed;border-spacing:0;border-collapse:collapse;text-align:center;line-height:2.5rem}table+table{position:absolute;top:2.5rem;left:0;opacity:1;transition:.1s ease-out;background:#fff}table+table td{line-height:3.75rem}table+table[aria-hidden=true]{visibility:hidden!important;opacity:0}td,th{padding:0}thead{background:#ddd;font-size:smaller;font-weight:700}[aria-selected=false],[aria-disabled=true]{color:#888}[aria-selected=true]{box-shadow:inset 0 0 0 1px #888}a:hover,td:hover,[aria-disabled=true],[aria-selected=true]{background-color:#f5f5f5}\";\n  var HTML = DOM.find(\"html\");\n  var DEFAULT_LANGUAGE = HTML.get(\"lang\") || void 0;\n  var CLICK_EVENT_TYPE = \"orientation\" in window ? \"touchend\" : \"mousedown\";\n  var SHADOW_DOM_SUPPORTED = !!HTMLElement.prototype.attachShadow;\n\n  var INTL_SUPPORTED = function () {\n    try {\n      new Date().toLocaleString(\"_\");\n    } catch (err) {\n      return err instanceof RangeError;\n    }\n\n    return false;\n  }();\n\n  function repeat(times, fn) {\n    if (typeof fn === \"string\") {\n      return Array(times + 1).join(fn);\n    } else {\n      return Array.apply(null, Array(times)).map(fn).join(\"\");\n    }\n  }\n\n  function ampm(pos, neg) {\n    return DEFAULT_LANGUAGE === \"en-US\" ? pos : neg;\n  }\n\n  function localeWeekday(index) {\n    var date = new Date();\n    date.setDate(date.getDate() - date.getDay() + index + ampm(0, 1));\n    /* istanbul ignore else */\n\n    if (INTL_SUPPORTED) {\n      try {\n        return date.toLocaleDateString(DEFAULT_LANGUAGE, {\n          weekday: \"short\"\n        });\n      } catch (err) {}\n    }\n\n    return date.toUTCString().split(\",\")[0].slice(0, 2);\n  }\n\n  function localeMonth(index) {\n    var date = new Date(25e8 * (index + 1));\n    /* istanbul ignore else */\n\n    if (INTL_SUPPORTED) {\n      try {\n        return date.toLocaleDateString(DEFAULT_LANGUAGE, {\n          month: \"short\"\n        });\n      } catch (err) {}\n    }\n\n    return date.toUTCString().split(\" \")[2];\n  }\n\n  function localeMonthYear(dateValue) {\n    // set hours to '12' to fix Safari bug in Date#toLocaleString\n    var date = new Date(dateValue.getFullYear(), dateValue.getMonth(), 12);\n    /* istanbul ignore else */\n\n    if (INTL_SUPPORTED) {\n      try {\n        return date.toLocaleDateString(DEFAULT_LANGUAGE, {\n          month: \"long\",\n          year: \"numeric\"\n        });\n      } catch (err) {}\n    }\n\n    return date.toUTCString().split(\" \").slice(2, 4).join(\" \");\n  }\n\n  var PICKER_BODY_HTML = \"<a rel=\\\"prev\\\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"100%\\\" viewBox=\\\"0 0 16 16\\\"><path d=\\\"M11.5 14.06L1 8L11.5 1.94z\\\"/></svg></a><a rel=\\\"next\\\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"100%\\\" viewBox=\\\"0 0 16 16\\\"><path d=\\\"M15 8L4.5 14.06L4.5 1.94z\\\"/></svg></a><b></b><table><thead>\" + repeat(7, function (_, i) {\n    return \"<th>\" + localeWeekday(i);\n  }) + \"</thead><tbody>\" + repeat(7, \"<tr>\" + repeat(7, \"<td>\") + \"</tr>\") + \"</tbody></table><table><tbody>\" + repeat(3, function (_, i) {\n    return \"<tr>\" + repeat(4, function (_, j) {\n      return \"<td>\" + localeMonth(i * 4 + j);\n    });\n  }) + \"</tbody></table>\";\n  DOM.extend(\"dateinput-picker\", {\n    constructor: function constructor() {\n      var _this = this;\n\n      if (SHADOW_DOM_SUPPORTED) {\n        var shadowRoot = this[0].attachShadow({\n          mode: \"closed\"\n        }); // use set timeout to make sure _parentInput is set\n\n        setTimeout(function () {\n          _this._initContent(DOM.constructor(shadowRoot));\n        }, 0);\n      } else {\n        var IE = \"ScriptEngineMajorVersion\" in window;\n        var object = DOM.create(\"<object type='text/html' width='100%' height='100%'>\"); // non-IE: must be BEFORE the element added to the document\n\n        if (!IE) {\n          object.set(\"data\", \"about:blank\");\n        } // load content when <object> is ready\n\n\n        this.on(\"load\", {\n          capture: true,\n          once: true\n        }, [\"target\"], function (object) {\n          var pickerRoot = DOM.constructor(object.get(\"contentDocument\"));\n\n          _this._initContent(pickerRoot.find(\"body\"));\n        }); // add object element to the document\n\n        this.append(object); // IE: must be AFTER the element added to the document\n\n        if (IE) {\n          object.set(\"data\", \"about:blank\");\n        }\n      }\n    },\n    _initContent: function _initContent(pickerBody) {\n      pickerBody.set(\"<style>\" + PICKER_CSS + \"</style>\" + PICKER_BODY_HTML); // internal references\n\n      this._calendarDays = pickerBody.find(\"table\");\n      this._calendarMonths = pickerBody.find(\"table+table\");\n      this._calendarCaption = pickerBody.find(\"b\"); // picker invalidate handlers\n\n      this._calendarDays.on(\"picker:invalidate\", [\"detail\"], this._invalidateDays.bind(this));\n\n      this._calendarMonths.on(\"picker:invalidate\", [\"detail\"], this._invalidateMonths.bind(this));\n\n      pickerBody.on(\"picker:invalidate\", [\"detail\"], this._invalidateCaption.bind(this)); // picker click handlers\n\n      pickerBody.on(CLICK_EVENT_TYPE, \"a\", [\"currentTarget\"], this._clickPickerButton.bind(this));\n      pickerBody.on(CLICK_EVENT_TYPE, \"td\", [\"target\"], this._clickPickerDay.bind(this));\n\n      this._calendarCaption.on(CLICK_EVENT_TYPE, this._clickCaption.bind(this)); // prevent input from loosing the focus outline\n\n\n      pickerBody.on(CLICK_EVENT_TYPE, function () {\n        return false;\n      });\n\n      this._parentInput.on(\"change\", this.invalidateState.bind(this)); // display calendar for autofocused elements\n\n\n      if (DOM.get(\"activeElement\") === this._parentInput[0]) {\n        this.show();\n      }\n    },\n    _invalidateDays: function _invalidateDays(dateValue) {\n      var month = dateValue.getMonth();\n      var date = dateValue.getDate();\n      var year = dateValue.getFullYear();\n      var min = new Date((this._parentInput.get(\"min\") || \"?\") + \"T00:00\");\n      var max = new Date((this._parentInput.get(\"max\") || \"?\") + \"T00:00\");\n      var iterDate = new Date(year, month, 1); // move to beginning of the first week in current month\n\n      iterDate.setDate(1 - iterDate.getDay() - ampm(1, iterDate.getDay() === 0 ? 7 : 0)); // update days picker\n\n      this._calendarDays.findAll(\"td\").forEach(function (day) {\n        iterDate.setDate(iterDate.getDate() + 1);\n        var mDiff = month - iterDate.getMonth(),\n            selectedValue = null,\n            disabledValue = null;\n        if (year !== iterDate.getFullYear()) mDiff *= -1;\n\n        if (iterDate < min || iterDate > max) {\n          disabledValue = \"true\";\n        } else if (mDiff > 0 || mDiff < 0) {\n          selectedValue = \"false\";\n        } else if (date === iterDate.getDate()) {\n          selectedValue = \"true\";\n        }\n\n        day._ts = iterDate.getTime();\n        day.set(\"aria-selected\", selectedValue);\n        day.set(\"aria-disabled\", disabledValue);\n        day.value(iterDate.getDate());\n      });\n    },\n    _invalidateMonths: function _invalidateMonths(dateValue) {\n      var month = dateValue.getMonth();\n      var year = dateValue.getFullYear();\n      var min = new Date((this._parentInput.get(\"min\") || \"?\") + \"T00:00\");\n      var max = new Date((this._parentInput.get(\"max\") || \"?\") + \"T00:00\");\n      var iterDate = new Date(year, month, 1);\n\n      this._calendarMonths.findAll(\"td\").forEach(function (day, index) {\n        iterDate.setMonth(index);\n        var mDiff = month - iterDate.getMonth(),\n            selectedValue = null;\n\n        if (iterDate < min || iterDate > max) {\n          selectedValue = \"false\";\n        } else if (!mDiff) {\n          selectedValue = \"true\";\n        }\n\n        day._ts = iterDate.getTime();\n        day.set(\"aria-selected\", selectedValue);\n      });\n    },\n    _invalidateCaption: function _invalidateCaption(dateValue) {\n      var captionText = dateValue.getFullYear();\n\n      if (this.get(\"aria-expanded\") !== \"true\") {\n        captionText = localeMonthYear(dateValue);\n      } // update calendar caption\n\n\n      this._calendarCaption.value(captionText);\n    },\n    _clickCaption: function _clickCaption() {\n      this.toggleState();\n      this.invalidateState();\n    },\n    _clickPickerButton: function _clickPickerButton(btn) {\n      var sign = btn.get(\"rel\") === \"next\" ? 1 : -1;\n      var targetDate = this._parentInput.get(\"valueAsDate\") || new Date();\n\n      if (this.get(\"aria-expanded\") === \"true\") {\n        targetDate.setFullYear(targetDate.getFullYear() + sign);\n      } else {\n        targetDate.setMonth(targetDate.getMonth() + sign);\n      }\n\n      this._parentInput.set(\"valueAsDate\", targetDate).fire(\"change\");\n    },\n    _clickPickerDay: function _clickPickerDay(target) {\n      var targetDate;\n\n      if (this.get(\"aria-expanded\") === \"true\") {\n        if (isNaN(target._ts)) {\n          targetDate = new Date();\n        } else {\n          targetDate = new Date(target._ts);\n        } // switch to date calendar mode\n\n\n        this.toggleState(false);\n      } else {\n        if (!isNaN(target._ts)) {\n          targetDate = new Date(target._ts);\n          this.hide();\n        }\n      }\n\n      if (targetDate != null) {\n        this._parentInput.set(\"valueAsDate\", targetDate).fire(\"change\");\n      }\n    },\n    toggleState: function toggleState(expanded) {\n      if (typeof expanded !== \"boolean\") {\n        expanded = this.get(\"aria-expanded\") !== \"true\";\n      }\n\n      this.set(\"aria-expanded\", expanded);\n    },\n    invalidateState: function invalidateState() {\n      var expanded = this.get(\"aria-expanded\") === \"true\";\n      var target = expanded ? this._calendarMonths : this._calendarDays;\n      var dateValue = this._parentInput.get(\"valueAsDate\") || new Date(); // refresh current picker\n\n      target.fire(\"picker:invalidate\", dateValue);\n\n      if (expanded) {\n        this._calendarMonths.show();\n      } else {\n        this._calendarMonths.hide();\n      }\n    }\n  });\n})();","import 'regenerator-runtime/runtime';\r\nimport DiffMatchPatch from 'diff-match-patch';\r\nimport { Nanostache } from '@solid-js/nanostache';\r\nimport 'better-dom/dist/better-dom';\r\nimport 'better-dateinput-polyfill/dist/better-dateinput-polyfill';\r\n\r\nconst requestHeaders = {\r\n\tmethod: 'GET',\r\n\theaders: {\r\n\t\t'Accept': 'application/json',\r\n\t\t'Content-Type': 'application/json'\r\n\t}\r\n}\r\n\r\nconst APIBaseURL = 'https://disinfo.quaidorsay.fr/api/open-terms-archive';\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n\r\n\tconst $form_explorer = document.getElementById('form_explorer');\r\n\tconst $form_services = document.getElementById('form_services');\r\n\tconst $form_typeofdocuments = document.getElementById('form_typeofdocuments');\r\n\tconst $form_firstdocumentdate = document.getElementById('form_firstdocumentdate');\r\n\tconst $form_seconddocumentdate = document.getElementById('form_seconddocumentdate');\r\n\tconst $inputDates = document.querySelectorAll('input[type=date]');\r\n\r\n\tif (window.fetch) {\r\n\t\tinit();\r\n\t} else {\r\n\t\tshowNotification('error', notificationsMsgs.browserSupport);\r\n\t}\r\n\r\n\tasync function init() {\r\n\t\tgetServices()\r\n\t\t\t.then(data => {\r\n\r\n\t\t\t\t//Init form control and listen form change\r\n\t\t\t\tsetMaxInputDateToNow()\r\n\t\t\t\tinitFormEventListener()\r\n\r\n\t\t\t\t//Populate form with data\r\n\t\t\t\tpopulateServices(data)\r\n\t\t\t\tpopulateTypeOfDocuments()\r\n\r\n\t\t\t\t//If no query string asked in URL\r\n\t\t\t\t//Select default service and documents\r\n\t\t\t\tconst queryStringData = getQueryStringData();\r\n\t\t\t\tif (Object.keys(queryStringData).length === 0) {\r\n\t\t\t\t\taddInURL('service', $form_services.selectedOptions.item(0).value);\r\n\t\t\t\t\taddInURL('typeofdocument', $form_typeofdocuments.selectedOptions.item(0).value)\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Update form with current state\r\n\t\t\t\twindow.addEventListener(\"popstate\", popStateHandler)\r\n\t\t\t\tpopStateHandler()\r\n\t\t\t})\r\n\t}\r\n\r\n\tasync function async_fetch(url) {\r\n\t\tconst response = await fetch(url)\r\n\t\tif (response.ok) return response.json()\r\n\t\tthrow new Error(response.status)\r\n\t}\r\n\r\n\tasync function getServices() {\r\n\t\tconst request = new Request(APIBaseURL+'/list_services/v1/?multiple_versions_only=true', requestHeaders);\r\n\t\treturn async_fetch(request);\r\n\t}\r\n\r\n\tasync function loadDocs() {\r\n\t\tconst formData = getFormData();\r\n\t\tconst doc1 = await getDoc(formData.service, formData.type, formData.firstDocumentDate);\r\n\t\tconst doc2 = await getDoc(formData.service, formData.type, formData.secondDocumentDate);\r\n\t\treturn Array(doc1, doc2);\r\n\t}\r\n\r\n\tasync function getDoc(service, type, date) {\r\n\t\tconst route = encodeURI(APIBaseURL+'/get_version_at_date/v1/' + service + '/' + type + '/' + date);\r\n\t\tconst request = new Request(route, requestHeaders);\r\n\t\tconst response = await fetch(request)\r\n\t\tif (response.ok) {\r\n\t\t\tconst data = await response.json()\r\n\t\t\tif (data.error) throw new Error(data.error)\r\n\t\t\tif (data.data == '') {\r\n\t\t\t\treturn await getDoc(service, type, data.next_version.substr(0, 10))\r\n\t\t\t} else return data;\r\n\t\t} else {\r\n\t\t\tthrow new Error(response.status)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initFormEventListener() {\r\n\t\t$form_explorer && $form_explorer.addEventListener('submit', submitHandler);\r\n\t\t$form_services && $form_services.addEventListener('change', onServiceChangeHandler);\r\n\t\t$form_typeofdocuments && $form_typeofdocuments.addEventListener('change', onTypeOfDocumentChangeHandler);\r\n\t\t$form_firstdocumentdate && $form_firstdocumentdate.addEventListener('change', onDateChange);\r\n\t\t$form_seconddocumentdate && $form_seconddocumentdate.addEventListener('change', onDateChange);\r\n\t}\r\n\r\n\tfunction populateServices(services) {\r\n\t\tconst servicesArray = Object.entries(services);\r\n\t\tconst sortedServices = sortAlphabeticallyServices(servicesArray);\r\n\t\tsortedServices && sortedServices.forEach(element => {\r\n\t\t\tconst option = new Option(element[0], element[0]);\r\n\t\t\toption.classList.add('font-marianne');\r\n\t\t\toption.dataset.typeofdocuments = sortAlphabeticallyTypeOfDocuments(element[1]);\r\n\t\t\t$form_services.add(option);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction populateTypeOfDocuments() {\r\n\t\t$form_typeofdocuments.innerHTML = '';\r\n\t\tconst typesofdocuments = $form_services.selectedOptions.item(0).dataset.typeofdocuments.split(',');\r\n\t\tif (typesofdocuments) {\r\n\t\t\tconst sortedTypeOfDocuments = sortAlphabeticallyTypeOfDocuments(typesofdocuments);\r\n\t\t\tsortedTypeOfDocuments && sortedTypeOfDocuments.forEach(type => {\r\n\t\t\t\t$form_typeofdocuments.add(new Option(type, type));\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction popStateHandler(event) {\r\n\t\tconst queryStringData = getQueryStringData();\r\n\t\tremoveDiff();\r\n\t\tremoveLegend();\r\n\t\tremoveNotification();\r\n\t\tupdateFormValues();\r\n\r\n\t\t//If action submit asked\r\n\t\tif (queryStringData.action == \"submit\") {\r\n\r\n\t\t\t//https://stackoverflow.com/questions/49587933/firefox-doesnt-preventing-dispatched-submit-event\r\n\t\t\t$form_explorer.dispatchEvent(new Event('submit', {\r\n\t\t\t\tcancelable: true\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getQueryStringData() {\r\n\t\tconst urlParams = new URLSearchParams(window.location.search);\r\n\t\tconst queryStringData = Object.fromEntries(urlParams);\r\n\t\treturn queryStringData;\r\n\t}\r\n\r\n\tfunction updateFormValues() {\r\n\t\tconst queryStringData = getQueryStringData();\r\n\r\n\t\tlet errogMsg = '';\r\n\r\n\t\t//Update service\r\n\t\tif (queryStringData.service) {\r\n\t\t\tif ($form_services) {\r\n\t\t\t\tconst option = isSelectOptionExist($form_services, queryStringData.service);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\toption.setAttribute('selected', 'selected');\r\n\t\t\t\t\tpopulateTypeOfDocuments();\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrogMsg = errogMsg.concat('This service is not available');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Update type of document\r\n\t\tif (queryStringData.typeofdocument) {\r\n\t\t\tif ($form_typeofdocuments) {\r\n\t\t\t\tconst option = isSelectOptionExist($form_typeofdocuments, queryStringData.typeofdocument);\r\n\t\t\t\tif (option) {\r\n\t\t\t\t\toption.setAttribute('selected', 'selected');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('Type of document is not valid for this service')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Update date1\r\n\t\tif (queryStringData.date1) {\r\n\t\t\tif ($form_firstdocumentdate) {\r\n\t\t\t\t$form_firstdocumentdate.value = queryStringData.date1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Update date2\r\n\t\tif (queryStringData.date2) {\r\n\t\t\tif ($form_seconddocumentdate) {\r\n\t\t\t\t$form_seconddocumentdate.value = queryStringData.date2;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//If error msg to display\r\n\t\tif (errogMsg != '') showNotification('error', errogMsg);\r\n\t}\r\n\r\n\tfunction isSelectOptionExist($target, value) {\r\n\t\treturn $target.querySelector('[value=\"' + value + '\"]');\r\n\t}\r\n\r\n\tfunction addInURL(key, value) {\r\n\t\tconst queryStringData = getQueryStringData();\r\n\t\tconst url = new URL(window.location);\r\n\t\tif ((url.searchParams.get(key) != null || url.searchParams.get(key) != value) || Object.keys(queryStringData).length == 0) {\r\n\t\t\turl.searchParams.set(key, value);\r\n\t\t\twindow.history.pushState({}, '', url);\r\n\t\t\twindow.dispatchEvent(new Event('popstate'));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction removeInURL(key) {\r\n\t\tconst url = new URL(window.location);\r\n\t\turl.searchParams.delete(key);\r\n\t\twindow.history.pushState({}, '', url);\r\n\t\twindow.dispatchEvent(new Event('popstate'));\r\n\t}\r\n\r\n\tfunction onServiceChangeHandler(event) {\r\n\t\tpopulateTypeOfDocuments();\r\n\t\taddInURL('service', $form_services.selectedOptions.item(0).value);\r\n\t\tonTypeOfDocumentChangeHandler()\r\n\t}\r\n\r\n\tfunction onTypeOfDocumentChangeHandler(event) {\r\n\t\taddInURL('typeofdocument', $form_typeofdocuments.selectedOptions.item(0).value);\r\n\t}\r\n\r\n\tfunction sortAlphabeticallyTypeOfDocuments(types) {\r\n\t\treturn types.sort((a, b) => {\r\n\t\t\treturn (a < b) ? -1 : (a > b) ? 1 : 0;\r\n\t\t})\r\n\t}\r\n\r\n\tfunction sortAlphabeticallyServices(services) {\r\n\t\treturn services.sort((a, b) => {\r\n\t\t\treturn (a[0] < b[0]) ? -1 : (a[0] > b[0]) ? 1 : 0;\r\n\t\t})\r\n\t}\r\n\r\n\tfunction onDateChange(event) {\r\n\t\tconst currentDateKey = (event.target.id == 'form_firstdocumentdate') ? 'date1' : 'date2';\r\n\t\taddInURL(currentDateKey, event.target.value);\r\n\t}\r\n\r\n\tfunction submitHandler(event) {\r\n\t\tevent.preventDefault();\r\n\t\tconst formData = getFormData();\r\n\t\tif (isValidForm()) {\r\n\t\t\tloadDocs()\r\n\t\t\t\t.then((docs) => {\r\n\t\t\t\t\tshowDiff(docs)\r\n\t\t\t\t\tshowLegend()\r\n\t\t\t\t\tshowDatesInfos(docs)\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getFormData() {\r\n\t\tconst formData = new FormData($form_explorer);\r\n\t\tconst service = formData.get('form_services');\r\n\t\tconst type = formData.get('form_typeofdocuments');\r\n\t\tconst firstDocumentDate = formData.get('form_firstdocumentdate');\r\n\t\tconst secondDocumentDate = formData.get('form_seconddocumentdate');\r\n\t\treturn {\r\n\t\t\tservice: service,\r\n\t\t\ttype: type,\r\n\t\t\tfirstDocumentDate: firstDocumentDate,\r\n\t\t\tsecondDocumentDate: secondDocumentDate\r\n\t\t};\r\n\t}\r\n\r\n\tfunction isValidForm() {\r\n\t\tconst formData = getFormData();\r\n\t\tif (formData.service && formData.type && formData.firstDocumentDate && formData.secondDocumentDate) return true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction showDatesInfos(docs) {\r\n\t\tconst formData = getFormData();\r\n\t\tconst firstDocumentDate = dateToDMY(formData.firstDocumentDate);\r\n\t\tconst secondDocumentDate = dateToDMY(formData.secondDocumentDate);\r\n\t\tconst firstDocumentVersionAtDate = dateToDMY(docs[0].version_at_date.substr(0, 10));\r\n\t\tconst secondDocumentVersionAtDate = dateToDMY(docs[1].version_at_date.substr(0, 10));\r\n\r\n\t\tlet msg = Nanostache(notificationsMsgs.dateClosest, {\r\n\t\t\tfirstDocumentDate: firstDocumentDate,\r\n\t\t\tsecondDocumentDate: secondDocumentDate,\r\n\t\t\tfirstDocumentVersionAtDate: firstDocumentVersionAtDate,\r\n\t\t\tsecondDocumentVersionAtDate: secondDocumentVersionAtDate,Date,\r\n\t\t});\r\n\r\n\t\t//If dates are the equals\r\n\t\tif (docs[0].version_at_date == docs[1].version_at_date){\r\n\t\t\tmsg = Nanostache(notificationsMsgs.nothingToCompare, {\r\n\t\t\t\tonlyDocumentDate: firstDocumentDate,\r\n\t\t\t});;\r\n\t\t}\r\n\r\n\t\tshowNotification('info', msg)\r\n\t}\r\n\r\n\tasync function showDiff(docs) {\r\n\t\tconst dmp = new DiffMatchPatch();\r\n\t\tconst diff = dmp.diff_main(docs[0].data, docs[1].data);\r\n\t\tconst diffPrettyHtml = prettyHTMLDiff(diff);\r\n\t\tconst $diffContent = document.createElement('DIV');\r\n\t\t$diffContent.classList.add('diffviewer_content');\r\n\t\t$diffContent.innerHTML = diffPrettyHtml;\r\n\t\tconst $diffviewer = document.createElement('DIV');\r\n\t\t$diffviewer.classList.add('diffviewer');\r\n\t\t$diffviewer.append($diffContent);\r\n\t\tif ($form_explorer) insertAfter($diffviewer, $form_explorer)\r\n\t}\r\n\r\n\tfunction showLegend(){\r\n\t\tremoveLegend()\r\n\t\tconst $legend = document.createElement('DIV');\r\n\t\t$legend.classList.add('legend');\r\n\t\tconst $legend_item1 = document.createElement('DIV');\r\n\t\tconst $legend_item2 = document.createElement('DIV');\r\n\t\t$legend_item1.classList.add('legend_item');\r\n\t\t$legend_item2.classList.add('legend_item');\r\n\t\t$legend_item1.innerHTML = legendMsg.add;\r\n\t\t$legend_item2.innerHTML = legendMsg.remove;\r\n\t\t$legend.append($legend_item1);\r\n\t\t$legend.append($legend_item2);\r\n\t\tif ($form_explorer) insertAfter($legend, $form_explorer)\r\n\t}\r\n\r\n\tfunction removeLegend(){\r\n\t\t[...document.getElementsByClassName(\"legend\")].map(n => n && n.remove());\r\n\t}\r\n\r\n\tfunction removeDiff() {\r\n\t\t[...document.getElementsByClassName(\"diffviewer\")].map(n => n && n.remove());\r\n\t}\r\n\r\n\tfunction showNotification(type, msg) {\r\n\t\tremoveNotification();\r\n\t\tconst $notification = document.createElement('DIV');\r\n\t\t$notification.classList.add('notification');\r\n\t\t$notification.classList.add('notification-' + type);\r\n\t\tconst $notification_content = document.createElement('DIV');\r\n\t\t$notification_content.classList.add('notification_content');\r\n\t\t$notification_content.innerHTML = msg;\r\n\t\t$notification.append($notification_content);\r\n\t\tif ($form_explorer) insertAfter($notification, $form_explorer)\r\n\t}\r\n\r\n\tfunction removeNotification() {\r\n\t\t[...document.getElementsByClassName(\"notification\")].map(n => n && n.remove());\r\n\t}\r\n\r\n\tfunction insertAfter(el, referenceNode) {\r\n\t\treferenceNode.parentNode.insertBefore(el, referenceNode.nextSibling);\r\n\t}\r\n\r\n\tfunction prettyHTMLDiff(diff) {\r\n\t\tvar DIFF_DEconstE = -1;\r\n\t\tvar DIFF_INSERT = 1;\r\n\t\tvar DIFF_EQUAL = 0;\r\n\t\tvar html = [];\r\n\t\tvar pattern_amp = /&/g;\r\n\t\tvar pattern_lt = /</g;\r\n\t\tvar pattern_gt = />/g;\r\n\t\tvar pattern_para = /\\n/g;\r\n\t\tfor (var x = 0; x < diff.length; x++) {\r\n\t\t\tvar op = diff[x][0]; // Operation (insert, deconste, equal)\r\n\t\t\tvar data = diff[x][1]; // Text of change.\r\n\t\t\tvar text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;')\r\n\t\t\t\t.replace(pattern_gt, '&gt;').replace(pattern_para, '<br>');\r\n\t\t\tswitch (op) {\r\n\t\t\t\tcase DIFF_INSERT:\r\n\t\t\t\t\thtml[x] = '<ins>' + text + '</ins>';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase DIFF_DEconstE:\r\n\t\t\t\t\thtml[x] = '<del>' + text + '</del>';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase DIFF_EQUAL:\r\n\t\t\t\t\thtml[x] = '<span>' + text + '</span>';\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn html.join('');\r\n\t}\r\n\r\n\tfunction setMaxInputDateToNow() {\r\n\t\t$inputDates.forEach($inputDate => {\r\n\t\t\t$inputDate.setAttribute('max', new Date().toISOString().split(\"T\")[0]);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction dateToDMY(dateToFormat) {\r\n\t\tconst date = new Date(dateToFormat);\r\n\t\treturn date.toLocaleString('default', {\r\n\t\t\tday: '2-digit',\r\n\t\t\tmonth: '2-digit',\r\n\t\t\tyear: 'numeric'\r\n\t\t});\r\n\t}\r\n});","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}